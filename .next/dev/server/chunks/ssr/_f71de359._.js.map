{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/constants/canvas.ts"],"sourcesContent":["export const TAMANO_SILLA = 24\nexport const ESPACIO_SILLA = 18\nexport const MARGEN_ESQUINA = 6\nexport const GAP_MINIMO = 4\nexport const GAP_ESTANDAR = 10\nexport const HISTORIAL_LIMITE = 50\nexport const UMBRAL_SNAP = 8\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;AAAO,MAAM,eAAe;AACrB,MAAM,gBAAgB;AACtB,MAAM,iBAAiB;AACvB,MAAM,aAAa;AACnB,MAAM,eAAe;AACrB,MAAM,mBAAmB;AACzB,MAAM,cAAc"}},
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/utils/mesa-utils.ts"],"sourcesContent":["import type { Mesa } from \"@/types/mesa\"\nimport { TAMANO_SILLA, ESPACIO_SILLA, MARGEN_ESQUINA, GAP_MINIMO } from \"@/constants/canvas\"\n\nexport const obtenerSiguienteId = (mesasExistentes: Mesa[]): string => {\n  const maxNum = mesasExistentes.reduce((max, m) => {\n    const match = m.id.match(/^T(\\d+)$/)\n    if (match) return Math.max(max, Number.parseInt(match[1]))\n    return max\n  }, 0)\n  return `T${maxNum + 1}`\n}\n\nexport const obtenerSiguienteNombre = (etiquetaBase: string, mesasExistentes: Mesa[]): string => {\n  const match = etiquetaBase.match(/^(.*?)(\\d+)$/)\n  if (!match) return etiquetaBase + \" (Copia)\"\n  const prefix = match[1]\n  const maxNum = mesasExistentes.reduce((max, m) => {\n    const mMatch = m.etiqueta.match(/^(.*?)(\\d+)$/)\n    if (mMatch && mMatch[1] === prefix) return Math.max(max, Number.parseInt(mMatch[2]))\n    return max\n  }, 0)\n  return `${prefix}${maxNum + 1}`\n}\n\nexport const esTamanoValido = (\n  mesa: Mesa,\n  nuevoAncho: number,\n  nuevoAlto: number,\n  nuevasSillas: number | null = null,\n): boolean => {\n  const cantidadSillas = nuevasSillas !== null ? nuevasSillas : mesa.sillas\n  const { forma, ladosActivos } = mesa\n  const lados = ladosActivos || [\"top\", \"bottom\", \"left\", \"right\"]\n\n  if (forma === \"circulo\") {\n    const perimetroDisponible = Math.PI * nuevoAncho\n    const perimetroNecesario = cantidadSillas * (TAMANO_SILLA + 2)\n    return perimetroDisponible >= perimetroNecesario\n  }\n\n  const lPos = [\n    { id: \"top\", l: nuevoAncho },\n    { id: \"bottom\", l: nuevoAncho },\n    { id: \"right\", l: nuevoAlto },\n    { id: \"left\", l: nuevoAlto },\n  ].filter((k) => lados.includes(k.id))\n\n  if (lPos.length === 0) return true\n\n  const pTotal = lPos.reduce((a, b) => a + b.l, 0)\n  let asg = 0\n  const dist = lPos.map((l) => {\n    const c = Math.floor((l.l / pTotal) * cantidadSillas)\n    const r = (l.l / pTotal) * mesa.sillas - c\n    asg += c\n    return { ...l, c, r }\n  })\n\n  dist.sort((a, b) => b.r - a.r)\n  for (let i = 0; i < cantidadSillas - asg; i++) if (dist[i]) dist[i].c++\n\n  return dist.every((d) => {\n    if (d.c === 0) return true\n    const espacioRequerido = d.c * TAMANO_SILLA + (d.c - 1) * GAP_MINIMO + MARGEN_ESQUINA * 2\n    return d.l >= espacioRequerido\n  })\n}\n\nexport const calcularLimites = (mesa: Mesa): { minW: number; minH: number } => {\n  const minBase = 50\n  const maxBase = 500\n\n  const encontrarMinimoValido = (eje: \"ancho\" | \"alto\"): number => {\n    let low = minBase\n    let high = maxBase\n    let minValido = maxBase\n\n    while (low <= high) {\n      const mid = Math.floor((low + high) / 2)\n      const w = eje === \"ancho\" ? mid : mesa.ancho\n      const h = eje === \"alto\" ? mid : mesa.alto\n\n      if (esTamanoValido(mesa, w, h)) {\n        minValido = mid\n        high = mid - 1\n      } else {\n        low = mid + 1\n      }\n    }\n    return minValido\n  }\n\n  return { minW: encontrarMinimoValido(\"ancho\"), minH: encontrarMinimoValido(\"alto\") }\n}\n\nexport const obtenerPosicionesSillas = (mesa: Mesa): { x: number; y: number; angulo: number }[] => {\n  const { x, y, ancho, alto, sillas, forma } = mesa\n  const lados = mesa.ladosActivos || [\"top\", \"bottom\", \"left\", \"right\"]\n  const factorEspacio = (mesa.espacioEntreSillas ?? 50) / 100\n\n  if (forma === \"circulo\") {\n    const radio = Math.max(ancho, alto) / 2 + ESPACIO_SILLA\n    return Array.from({ length: sillas }).map((_, i) => {\n      const angRad = ((i * 360) / sillas - 90) * (Math.PI / 180)\n      const anguloSilla = (i * 360) / sillas\n      return {\n        x: x + radio * Math.cos(angRad),\n        y: y + radio * Math.sin(angRad),\n        angulo: anguloSilla,\n      }\n    })\n  }\n\n  const lPos = [\n    { id: \"top\", l: ancho },\n    { id: \"bottom\", l: ancho },\n    { id: \"right\", l: alto },\n    { id: \"left\", l: alto },\n  ].filter((k) => lados.includes(k.id))\n\n  if (lPos.length === 0) return []\n\n  const pTotal = lPos.reduce((a, b) => a + b.l, 0)\n  let asg = 0\n  const dist = lPos.map((l) => {\n    const c = Math.floor((l.l / pTotal) * sillas)\n    const r = (l.l / pTotal) * mesa.sillas - c\n    asg += c\n    return { ...l, c, r }\n  })\n\n  dist.sort((a, b) => b.r - a.r)\n  for (let i = 0; i < sillas - asg; i++) if (dist[i]) dist[i].c++\n\n  const pos: { x: number; y: number; angulo: number }[] = []\n  const b = { l: x - ancho / 2, r: x + ancho / 2, t: y - alto / 2, b: y + alto / 2 }\n\n  const addSillas = (s: string, c: number) => {\n    if (c === 0) return\n    const longLado = s === \"top\" || s === \"bottom\" ? ancho : alto\n    const espacioDisponible = longLado - MARGEN_ESQUINA * 2\n\n    const anchoTotalSillas = c * TAMANO_SILLA\n    const espacioLibre = espacioDisponible - anchoTotalSillas\n    const gapMaximo = c > 1 ? espacioLibre / (c - 1) : 0\n    const gapFinal = c > 1 ? GAP_MINIMO + (gapMaximo - GAP_MINIMO) * factorEspacio : 0\n\n    const anchoOcupado = anchoTotalSillas + (c - 1) * gapFinal\n    const offsetInicio = (longLado - anchoOcupado) / 2 + TAMANO_SILLA / 2\n\n    for (let i = 0; i < c; i++) {\n      const offset = offsetInicio + i * (TAMANO_SILLA + gapFinal)\n      if (s === \"top\") pos.push({ x: b.l + offset, y: b.t - ESPACIO_SILLA, angulo: 180 })\n      if (s === \"bottom\") pos.push({ x: b.l + offset, y: b.b + ESPACIO_SILLA, angulo: 0 })\n      if (s === \"right\") pos.push({ x: b.r + ESPACIO_SILLA, y: b.t + offset, angulo: 270 })\n      if (s === \"left\") pos.push({ x: b.l - ESPACIO_SILLA, y: b.t + offset, angulo: 90 })\n    }\n  }\n\n  dist.forEach((d) => addSillas(d.id, d.c))\n  return pos\n}\n\nexport const calcularBoundingBox = (\n  mesasArray: Mesa[],\n  padding = 20,\n): { minX: number; minY: number; maxX: number; maxY: number; width: number; height: number } | null => {\n  if (mesasArray.length === 0) return null\n\n  let minX = Number.POSITIVE_INFINITY,\n    minY = Number.POSITIVE_INFINITY,\n    maxX = Number.NEGATIVE_INFINITY,\n    maxY = Number.NEGATIVE_INFINITY\n  const pad = ESPACIO_SILLA + TAMANO_SILLA + padding\n\n  mesasArray.forEach((m) => {\n    const scale = m.escala || 1\n    const l = m.x - (m.ancho * scale) / 2 - pad\n    const r = m.x + (m.ancho * scale) / 2 + pad\n    const t = m.y - (m.alto * scale) / 2 - pad\n    const b = m.y + (m.alto * scale) / 2 + pad\n    if (l < minX) minX = l\n    if (r > maxX) maxX = r\n    if (t < minY) minY = t\n    if (b > maxY) maxY = b\n  })\n\n  return { minX, minY, maxX, maxY, width: maxX - minX, height: maxY - minY }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 272, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/utils/export-utils.ts"],"sourcesContent":["import type { Mesa, Sector } from \"@/types/mesa\"\nimport { TAMANO_SILLA, ESPACIO_SILLA } from \"@/constants/canvas\"\n\nexport const exportarSVG = (\n  svgRef: SVGSVGElement,\n  mesas: Mesa[],\n  imagenFondo: string | null,\n  dimensionesImagen: { w: number; h: number },\n  tipoMapa: string,\n) => {\n  const clone = svgRef.cloneNode(true) as SVGSVGElement\n  clone.querySelector(\"#capa-fondo\")?.remove()\n  clone.querySelector(\"#capa-grid\")?.remove()\n  clone.querySelector(\"#capa-guias\")?.remove()\n  clone.querySelector(\"#capa-seleccion\")?.remove()\n\n  clone.setAttribute(\"width\", \"100%\")\n  clone.setAttribute(\"height\", \"100%\")\n  clone.style.width = \"100%\"\n  clone.style.height = \"100%\"\n\n  if (!imagenFondo && mesas.length > 0) {\n    let minX = Number.POSITIVE_INFINITY,\n      minY = Number.POSITIVE_INFINITY,\n      maxX = Number.NEGATIVE_INFINITY,\n      maxY = Number.NEGATIVE_INFINITY\n    const pad = 50\n\n    mesas.forEach((m) => {\n      const l = m.x - m.ancho / 2 - ESPACIO_SILLA - TAMANO_SILLA\n      const r = m.x + m.ancho / 2 + ESPACIO_SILLA + TAMANO_SILLA\n      const t = m.y - m.alto / 2 - ESPACIO_SILLA - TAMANO_SILLA\n      const b = m.y + m.alto / 2 + ESPACIO_SILLA + TAMANO_SILLA + 20\n      if (l < minX) minX = l\n      if (r > maxX) maxX = r\n      if (t < minY) minY = t\n      if (b > maxY) maxY = b\n    })\n\n    if (minX !== Number.POSITIVE_INFINITY) {\n      const w = maxX - minX + pad * 2\n      const h = maxY - minY + pad * 2\n      clone.setAttribute(\"viewBox\", `${minX - pad} ${minY - pad} ${w} ${h}`)\n      const contentGroup = clone.querySelector(\"#contenido-mapa\")\n      if (contentGroup) contentGroup.removeAttribute(\"transform\")\n    }\n  } else if (imagenFondo) {\n    clone.setAttribute(\"viewBox\", `0 0 ${dimensionesImagen.w} ${dimensionesImagen.h}`)\n    const contentGroup = clone.querySelector(\"#contenido-mapa\")\n    if (contentGroup) contentGroup.removeAttribute(\"transform\")\n  }\n\n  const a = document.createElement(\"a\")\n  a.href = URL.createObjectURL(\n    new Blob([new XMLSerializer().serializeToString(clone)], { type: \"image/svg+xml;charset=utf-8\" }),\n  )\n  a.download = `plano_${tipoMapa}_${Date.now()}.svg`\n  a.click()\n}\n\nexport const descargarJSON = (\n  mesas: Mesa[],\n  sectores: Sector[],\n  tipoMapa: string,\n  imagenFondo: string | null,\n  dimensionesImagen: { w: number; h: number },\n) => {\n  const dataToSave: any = { tipo: tipoMapa, sectores }\n\n  if (imagenFondo) {\n    dataToSave.dimensiones = dimensionesImagen\n    dataToSave.mesas = mesas\n  } else {\n    if (mesas.length === 0) {\n      dataToSave.dimensiones = { w: 800, h: 600 }\n      dataToSave.mesas = []\n    } else {\n      let minX = Number.POSITIVE_INFINITY,\n        minY = Number.POSITIVE_INFINITY,\n        maxX = Number.NEGATIVE_INFINITY,\n        maxY = Number.NEGATIVE_INFINITY\n      const pad = 50\n\n      mesas.forEach((m) => {\n        const l = m.x - m.ancho / 2 - ESPACIO_SILLA - TAMANO_SILLA\n        const r = m.x + m.ancho / 2 + ESPACIO_SILLA + TAMANO_SILLA\n        const t = m.y - m.alto / 2 - ESPACIO_SILLA - TAMANO_SILLA\n        const b = m.y + m.alto / 2 + ESPACIO_SILLA + TAMANO_SILLA + 20\n        if (l < minX) minX = l\n        if (r > maxX) maxX = r\n        if (t < minY) minY = t\n        if (b > maxY) maxY = b\n      })\n\n      const originX = minX - pad\n      const originY = minY - pad\n      const width = maxX - minX + pad * 2\n      const height = maxY - minY + pad * 2\n      dataToSave.dimensiones = { w: width, h: height }\n      dataToSave.mesas = mesas.map((m) => ({ ...m, x: m.x - originX, y: m.y - originY }))\n    }\n  }\n\n  const a = document.createElement(\"a\")\n  a.href = URL.createObjectURL(new Blob([JSON.stringify(dataToSave, null, 2)], { type: \"application/json\" }))\n  a.download = `datos_${tipoMapa}_${Date.now()}.json`\n  a.click()\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 380, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/hooks/use-historial.ts"],"sourcesContent":["\"use client\"\n\nimport { useState, useRef, useCallback } from \"react\"\nimport type { Mesa, Sector, HistorialEstado } from \"@/types/mesa\"\nimport { HISTORIAL_LIMITE } from \"@/constants/canvas\"\n\ntype Historial = {\n  pasado: HistorialEstado[]\n  futuro: HistorialEstado[]\n}\n\nexport function useHistorial(\n  mesas: Mesa[],\n  sectores: Sector[],\n  idsSeleccionados: string[],\n  setMesas: (mesas: Mesa[]) => void,\n  setSectores: (sectores: Sector[]) => void,\n  setIdsSeleccionados: (ids: string[]) => void,\n) {\n  const [historial, setHistorial] = useState<Historial>({ pasado: [], futuro: [] })\n  const snapshotRef = useRef<HistorialEstado | null>(null)\n\n  const guardarHistorial = useCallback(() => {\n    setHistorial((prev) => {\n      const nuevoEstado: HistorialEstado = {\n        mesas: JSON.parse(JSON.stringify(mesas)),\n        sectores: JSON.parse(JSON.stringify(sectores)),\n        idsSeleccionados: [...idsSeleccionados],\n      }\n      const nuevoPasado = [...prev.pasado, nuevoEstado].slice(-HISTORIAL_LIMITE)\n      return { pasado: nuevoPasado, futuro: [] }\n    })\n  }, [mesas, sectores, idsSeleccionados])\n\n  const tomarSnapshot = useCallback(() => {\n    snapshotRef.current = {\n      mesas: JSON.parse(JSON.stringify(mesas)),\n      sectores: JSON.parse(JSON.stringify(sectores)),\n      idsSeleccionados: [...idsSeleccionados],\n    }\n  }, [mesas, sectores, idsSeleccionados])\n\n  const confirmarSnapshotSiHuboCambios = useCallback(() => {\n    if (!snapshotRef.current) return\n\n    const estadoPrevio = snapshotRef.current\n    const huboCambios =\n      JSON.stringify(estadoPrevio.mesas) !== JSON.stringify(mesas) ||\n      JSON.stringify(estadoPrevio.sectores) !== JSON.stringify(sectores)\n\n    if (huboCambios) {\n      setHistorial((prev) => ({\n        pasado: [...prev.pasado, estadoPrevio].slice(-HISTORIAL_LIMITE),\n        futuro: [],\n      }))\n    }\n    snapshotRef.current = null\n  }, [mesas, sectores])\n\n  const deshacer = useCallback(() => {\n    if (historial.pasado.length === 0) return\n\n    const estadoAnterior = historial.pasado[historial.pasado.length - 1]\n    const nuevoPasado = historial.pasado.slice(0, -1)\n    const estadoActual: HistorialEstado = { mesas, sectores, idsSeleccionados }\n\n    setHistorial({\n      pasado: nuevoPasado,\n      futuro: [estadoActual, ...historial.futuro],\n    })\n\n    setMesas(estadoAnterior.mesas)\n    setSectores(estadoAnterior.sectores)\n    setIdsSeleccionados(estadoAnterior.idsSeleccionados || [])\n  }, [historial, mesas, sectores, idsSeleccionados, setMesas, setSectores, setIdsSeleccionados])\n\n  const rehacer = useCallback(() => {\n    if (historial.futuro.length === 0) return\n\n    const estadoSiguiente = historial.futuro[0]\n    const nuevoFuturo = historial.futuro.slice(1)\n    const estadoActual: HistorialEstado = { mesas, sectores, idsSeleccionados }\n\n    setHistorial({\n      pasado: [...historial.pasado, estadoActual],\n      futuro: nuevoFuturo,\n    })\n\n    setMesas(estadoSiguiente.mesas)\n    setSectores(estadoSiguiente.sectores)\n    setIdsSeleccionados(estadoSiguiente.idsSeleccionados || [])\n  }, [historial, mesas, sectores, idsSeleccionados, setMesas, setSectores, setIdsSeleccionados])\n\n  return {\n    historial,\n    guardarHistorial,\n    tomarSnapshot,\n    confirmarSnapshotSiHuboCambios,\n    deshacer,\n    rehacer,\n    puedeDeshacer: historial.pasado.length > 0,\n    puedeRehacer: historial.futuro.length > 0,\n  }\n}\n"],"names":[],"mappings":";;;;AAEA;AAEA;AAJA;;;AAWO,SAAS,aACd,KAAa,EACb,QAAkB,EAClB,gBAA0B,EAC1B,QAAiC,EACjC,WAAyC,EACzC,mBAA4C;IAE5C,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,iNAAQ,EAAY;QAAE,QAAQ,EAAE;QAAE,QAAQ,EAAE;IAAC;IAC/E,MAAM,cAAc,IAAA,+MAAM,EAAyB;IAEnD,MAAM,mBAAmB,IAAA,oNAAW,EAAC;QACnC,aAAa,CAAC;YACZ,MAAM,cAA+B;gBACnC,OAAO,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;gBACjC,UAAU,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;gBACpC,kBAAkB;uBAAI;iBAAiB;YACzC;YACA,MAAM,cAAc;mBAAI,KAAK,MAAM;gBAAE;aAAY,CAAC,KAAK,CAAC,CAAC,uIAAgB;YACzE,OAAO;gBAAE,QAAQ;gBAAa,QAAQ,EAAE;YAAC;QAC3C;IACF,GAAG;QAAC;QAAO;QAAU;KAAiB;IAEtC,MAAM,gBAAgB,IAAA,oNAAW,EAAC;QAChC,YAAY,OAAO,GAAG;YACpB,OAAO,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;YACjC,UAAU,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;YACpC,kBAAkB;mBAAI;aAAiB;QACzC;IACF,GAAG;QAAC;QAAO;QAAU;KAAiB;IAEtC,MAAM,iCAAiC,IAAA,oNAAW,EAAC;QACjD,IAAI,CAAC,YAAY,OAAO,EAAE;QAE1B,MAAM,eAAe,YAAY,OAAO;QACxC,MAAM,cACJ,KAAK,SAAS,CAAC,aAAa,KAAK,MAAM,KAAK,SAAS,CAAC,UACtD,KAAK,SAAS,CAAC,aAAa,QAAQ,MAAM,KAAK,SAAS,CAAC;QAE3D,IAAI,aAAa;YACf,aAAa,CAAC,OAAS,CAAC;oBACtB,QAAQ;2BAAI,KAAK,MAAM;wBAAE;qBAAa,CAAC,KAAK,CAAC,CAAC,uIAAgB;oBAC9D,QAAQ,EAAE;gBACZ,CAAC;QACH;QACA,YAAY,OAAO,GAAG;IACxB,GAAG;QAAC;QAAO;KAAS;IAEpB,MAAM,WAAW,IAAA,oNAAW,EAAC;QAC3B,IAAI,UAAU,MAAM,CAAC,MAAM,KAAK,GAAG;QAEnC,MAAM,iBAAiB,UAAU,MAAM,CAAC,UAAU,MAAM,CAAC,MAAM,GAAG,EAAE;QACpE,MAAM,cAAc,UAAU,MAAM,CAAC,KAAK,CAAC,GAAG,CAAC;QAC/C,MAAM,eAAgC;YAAE;YAAO;YAAU;QAAiB;QAE1E,aAAa;YACX,QAAQ;YACR,QAAQ;gBAAC;mBAAiB,UAAU,MAAM;aAAC;QAC7C;QAEA,SAAS,eAAe,KAAK;QAC7B,YAAY,eAAe,QAAQ;QACnC,oBAAoB,eAAe,gBAAgB,IAAI,EAAE;IAC3D,GAAG;QAAC;QAAW;QAAO;QAAU;QAAkB;QAAU;QAAa;KAAoB;IAE7F,MAAM,UAAU,IAAA,oNAAW,EAAC;QAC1B,IAAI,UAAU,MAAM,CAAC,MAAM,KAAK,GAAG;QAEnC,MAAM,kBAAkB,UAAU,MAAM,CAAC,EAAE;QAC3C,MAAM,cAAc,UAAU,MAAM,CAAC,KAAK,CAAC;QAC3C,MAAM,eAAgC;YAAE;YAAO;YAAU;QAAiB;QAE1E,aAAa;YACX,QAAQ;mBAAI,UAAU,MAAM;gBAAE;aAAa;YAC3C,QAAQ;QACV;QAEA,SAAS,gBAAgB,KAAK;QAC9B,YAAY,gBAAgB,QAAQ;QACpC,oBAAoB,gBAAgB,gBAAgB,IAAI,EAAE;IAC5D,GAAG;QAAC;QAAW;QAAO;QAAU;QAAkB;QAAU;QAAa;KAAoB;IAE7F,OAAO;QACL;QACA;QACA;QACA;QACA;QACA;QACA,eAAe,UAAU,MAAM,CAAC,MAAM,GAAG;QACzC,cAAc,UAAU,MAAM,CAAC,MAAM,GAAG;IAC1C;AACF"}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/hooks/use-canvas.ts"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useRef, useCallback, useMemo, useEffect } from \"react\"\nimport type { Mesa, Sector, CajaSeleccion, Guia, EditandoNombre } from \"@/types/mesa\"\nimport { UMBRAL_SNAP } from \"@/constants/canvas\"\nimport {\n  obtenerSiguienteId,\n  obtenerSiguienteNombre,\n  esTamanoValido,\n  calcularLimites,\n  calcularBoundingBox,\n} from \"@/utils/mesa-utils\"\nimport { exportarSVG, descargarJSON } from \"@/utils/export-utils\"\nimport { useHistorial } from \"@/hooks/use-historial\"\n\ninterface UseCanvasReturn {\n  // Estado de configuración\n  modoConfigurado: boolean\n  pasoModal: string\n  setPasoModal: (paso: string) => void\n  tipoMapa: string\n  configSectorUnico: { nombre: string; color: string; precio: number }\n  setConfigSectorUnico: (config: { nombre: string; color: string; precio: number }) => void\n  confirmarSectorUnico: () => void\n  iniciarMapaCompleto: () => void\n\n  // Datos principales\n  mesas: Mesa[]\n  setMesas: React.Dispatch<React.SetStateAction<Mesa[]>>\n  sectores: Sector[]\n  idsSeleccionados: string[]\n  setIdsSeleccionados: React.Dispatch<React.SetStateAction<string[]>>\n\n  // Navegación\n  zoom: number\n  setZoom: React.Dispatch<React.SetStateAction<number>>\n  pan: { x: number; y: number }\n  herramienta: string\n  setHerramienta: (h: string) => void\n  herramientaActiva: string\n  isPanning: boolean\n  cursorStyle: string\n\n  // UI state\n  panelActivo: string\n  setPanelActivo: (p: string) => void\n  imagenFondo: string | null\n  dimensionesImagen: { w: number; h: number }\n  menuDescargaAbierto: boolean\n  setMenuDescargaAbierto: (b: boolean) => void\n  mostrarAyudaAtajos: boolean\n  setMostrarAyudaAtajos: (b: boolean) => void\n  editandoNombreMesa: EditandoNombre\n  setEditandoNombreMesa: (e: EditandoNombre) => void\n  guias: Guia[]\n  cajaSeleccion: CajaSeleccion\n\n  // Historial\n  puedeDeshacer: boolean\n  puedeRehacer: boolean\n  deshacer: () => void\n  rehacer: () => void\n  guardarHistorial: () => void\n\n  // Acciones de mesas\n  agregarMesa: (forma: \"circulo\" | \"cuadrado\") => void\n  duplicarMesasSeleccionadas: () => void\n  eliminarSeleccionadas: () => void\n  toggleBloqueo: () => void\n  actualizarMesa: (k: string, v: any) => void\n  actualizarDiametro: (d: number) => void\n  toggleLado: (lado: string) => void\n  confirmarNombreMesa: () => void\n\n  // Acciones de sectores\n  agregarSector: () => void\n  actualizarSector: (id: string, k: string, v: any) => void\n  eliminarSector: (id: string) => void\n\n  // Acciones de navegación\n  centrarlVista: () => void\n  zoomToFit: () => void\n  zoomToSelection: () => void\n\n  // Handlers de mouse\n  alPresionarMouse: (e: React.MouseEvent, tipo: string, mesa?: Mesa | null) => void\n  alMoverMouse: (e: React.MouseEvent) => void\n  alSoltarMouse: () => void\n  manejarDobleClickMesa: (mesa: Mesa) => void\n\n  // Handlers de touch (mobile)\n  alPresionarTouch: (e: React.TouchEvent, tipo: string, mesa?: Mesa | null) => void\n  alMoverTouch: (e: React.TouchEvent) => void\n  alSoltarTouch: () => void\n\n  // IO\n  manejarSubidaImagen: (e: React.ChangeEvent<HTMLInputElement>) => void\n  handleExportarSVG: () => void\n  handleDescargarJSON: () => void\n\n  // Refs\n  referenciaSvg: React.RefObject<SVGSVGElement>\n  contenedorRef: React.RefObject<HTMLDivElement>\n  inputNombreRef: React.RefObject<HTMLInputElement>\n  inputArchivoRef: React.RefObject<HTMLInputElement>\n\n  // Computed\n  mesaActiva: Mesa | null\n  hayMesasBloqueadas: boolean\n  limitesSlider: { minW: number; minH: number }\n}\n\nexport function useCanvas(): UseCanvasReturn {\n  // --- CONFIGURACIÓN INICIAL ---\n  const [modoConfigurado, setModoConfigurado] = useState(false)\n  const [pasoModal, setPasoModal] = useState(\"seleccion\")\n  const [tipoMapa, setTipoMapa] = useState(\"completo\")\n  const [configSectorUnico, setConfigSectorUnico] = useState({ nombre: \"General\", color: \"#40A578\", precio: 100 })\n\n  // --- ESTADO DE DATOS ---\n  const [sectores, setSectores] = useState<Sector[]>([\n    { id: \"S1\", nombre: \"General\", color: \"#94a3b8\", precio: 50 },\n    { id: \"S2\", nombre: \"VIP\", color: \"#8B6FFA\", precio: 150 },\n  ])\n  const [mesas, setMesas] = useState<Mesa[]>([])\n  const [idsSeleccionados, setIdsSeleccionados] = useState<string[]>([])\n\n  // --- HISTORIAL ---\n  const {\n    guardarHistorial,\n    tomarSnapshot,\n    confirmarSnapshotSiHuboCambios,\n    deshacer,\n    rehacer,\n    puedeDeshacer,\n    puedeRehacer,\n  } = useHistorial(mesas, sectores, idsSeleccionados, setMesas, setSectores, setIdsSeleccionados)\n\n  // --- ESTADO DE INTERACCIÓN ---\n  const [herramienta, setHerramienta] = useState(\"seleccion\")\n  const [herramientaTemporal, setHerramientaTemporal] = useState<string | null>(null)\n  const [arrastrandoMesa, setArrastrandoMesa] = useState(false)\n  const [cajaSeleccion, setCajaSeleccion] = useState<CajaSeleccion>(null)\n  const [offsetsMesas, setOffsetsMesas] = useState<{ [key: string]: { x: number; y: number } }>({})\n  const [idMesaArrastradaPrincipal, setIdMesaArrastradaPrincipal] = useState<string | null>(null)\n  const [guias, setGuias] = useState<Guia[]>([])\n  const [mostrarAyudaAtajos, setMostrarAyudaAtajos] = useState(false)\n  const [editandoNombreMesa, setEditandoNombreMesa] = useState<EditandoNombre>(null)\n  const [mesasPortapapeles, setMesasPortapapeles] = useState<Mesa[]>([])\n  const [menuDescargaAbierto, setMenuDescargaAbierto] = useState(false)\n\n  // --- NAVEGACIÓN ---\n  const [zoom, setZoom] = useState(1)\n  const [pan, setPan] = useState({ x: 0, y: 0 })\n  const [isPanning, setIsPanning] = useState(false)\n  const panStart = useRef({ x: 0, y: 0 })\n  const lastTouchDistance = useRef<number | null>(null)\n  const lastTouchCenter = useRef<{ x: number; y: number } | null>(null)\n  const touchTimeout = useRef<NodeJS.Timeout | null>(null)\n  const [panelActivo, setPanelActivo] = useState(\"propiedades\")\n  const [imagenFondo, setImagenFondo] = useState<string | null>(null)\n  const [dimensionesImagen, setDimensionesImagen] = useState({ w: 800, h: 600 })\n  const [vistaCentradaInicial, setVistaCentradaInicial] = useState(false)\n\n  // --- REFS ---\n  const referenciaSvg = useRef<SVGSVGElement>(null)\n  const contenedorRef = useRef<HTMLDivElement>(null)\n  const inputNombreRef = useRef<HTMLInputElement>(null)\n  const inputArchivoRef = useRef<HTMLInputElement>(null)\n\n  const herramientaActiva = herramientaTemporal || herramienta\n\n  // --- FUNCIONES AUXILIARES ---\n  const getMousePos = useCallback(\n    (clientX: number, clientY: number) => {\n      if (!referenciaSvg.current) return { x: 0, y: 0 }\n      const rect = referenciaSvg.current.getBoundingClientRect()\n      return { x: (clientX - rect.left - pan.x) / zoom, y: (clientY - rect.top - pan.y) / zoom }\n    },\n    [pan, zoom],\n  )\n\n  const centrarlVista = useCallback(() => {\n    setPan({ x: 0, y: 0 })\n    setZoom(1)\n  }, [])\n\n  const zoomToFit = useCallback(() => {\n    if (!referenciaSvg.current || mesas.length === 0) {\n      centrarlVista()\n      return\n    }\n    const bbox = calcularBoundingBox(mesas)\n    if (!bbox) return\n\n    const rect = referenciaSvg.current.getBoundingClientRect()\n    const padding = 50\n    const scaleX = (rect.width - padding * 2) / bbox.width\n    const scaleY = (rect.height - padding * 2) / bbox.height\n    const newZoom = Math.min(Math.max(Math.min(scaleX, scaleY), 0.1), 2)\n\n    const centerX = (bbox.minX + bbox.maxX) / 2\n    const centerY = (bbox.minY + bbox.maxY) / 2\n\n    setZoom(newZoom)\n    setPan({ x: rect.width / 2 - centerX * newZoom, y: rect.height / 2 - centerY * newZoom })\n  }, [mesas, centrarlVista])\n\n  const zoomToSelection = useCallback(() => {\n    if (!referenciaSvg.current || idsSeleccionados.length === 0) return\n\n    const mesasSeleccionadas = mesas.filter((m) => idsSeleccionados.includes(m.id))\n    const bbox = calcularBoundingBox(mesasSeleccionadas)\n    if (!bbox) return\n\n    const rect = referenciaSvg.current.getBoundingClientRect()\n    const padding = 100\n    const scaleX = (rect.width - padding * 2) / bbox.width\n    const scaleY = (rect.height - padding * 2) / bbox.height\n    const newZoom = Math.min(Math.max(Math.min(scaleX, scaleY), 1.5), 3)\n\n    const centerX = (bbox.minX + bbox.maxX) / 2\n    const centerY = (bbox.minY + bbox.maxY) / 2\n\n    setZoom(newZoom)\n    setPan({ x: rect.width / 2 - centerX * newZoom, y: rect.height / 2 - centerY * newZoom })\n  }, [mesas, idsSeleccionados])\n\n  // --- GESTIÓN DE SECTORES ---\n  const agregarSector = useCallback(() => {\n    guardarHistorial()\n    const nuevoId = `S${Date.now()}`\n    const colores = [\"#ef4444\", \"#f59e0b\", \"#10b981\", \"#3b82f6\", \"#ec4899\", \"#8b5cf6\"]\n    const color = colores[sectores.length % colores.length]\n    setSectores([...sectores, { id: nuevoId, nombre: `Nuevo Sector ${sectores.length + 1}`, color, precio: 0 }])\n  }, [guardarHistorial, sectores])\n\n  const actualizarSector = useCallback((id: string, k: string, v: any) => {\n    setSectores((prev) => prev.map((s) => (s.id === id ? { ...s, [k]: v } : s)))\n  }, [])\n\n  const eliminarSector = useCallback(\n    (id: string) => {\n      if (sectores.length <= 1) return\n      guardarHistorial()\n      const fallback = sectores.find((s) => s.id !== id)!.id\n      setMesas((prev) => prev.map((m) => (m.sectorId === id ? { ...m, sectorId: fallback } : m)))\n      setSectores(sectores.filter((s) => s.id !== id))\n    },\n    [guardarHistorial, sectores],\n  )\n\n  // --- GESTIÓN DE MESAS ---\n  const agregarMesa = useCallback(\n    (forma: \"circulo\" | \"cuadrado\") => {\n      guardarHistorial()\n      const nuevoId = obtenerSiguienteId(mesas)\n      const sz = forma === \"circulo\" ? 110 : 100\n\n      if (referenciaSvg.current) {\n        const rect = referenciaSvg.current.getBoundingClientRect()\n        const worldPos = getMousePos(rect.left + rect.width / 2, rect.top + rect.height / 2)\n        const nuevoNombre = obtenerSiguienteNombre(\"Mesa 0\", mesas)\n\n        setMesas([\n          ...mesas,\n          {\n            id: nuevoId,\n            x: worldPos.x,\n            y: worldPos.y,\n            etiqueta: nuevoNombre,\n            forma,\n            sillas: forma === \"cuadrado\" ? 8 : 4,\n            ancho: forma === \"cuadrado\" ? 120 : sz,\n            alto: forma === \"cuadrado\" ? 200 : sz,\n            escala: 1,\n            sectorId: sectores[0].id,\n            ladosActivos: [\"top\", \"bottom\", \"left\", \"right\"],\n            bloqueada: false,\n            espacioEntreSillas: 50, // valor por defecto para espacio entre sillas\n          },\n        ])\n        setIdsSeleccionados([nuevoId])\n        setPanelActivo(\"propiedades\")\n        setHerramienta(\"seleccion\")\n      }\n    },\n    [guardarHistorial, mesas, sectores, getMousePos],\n  )\n\n  const insertarNuevasMesas = useCallback(\n    (origenMesas: Mesa[], offsetX: number, offsetY: number) => {\n      const nuevasMesas: Mesa[] = []\n      const mesasTemp = [...mesas]\n\n      origenMesas.forEach((base) => {\n        const nuevoId = obtenerSiguienteId(mesasTemp)\n        const nuevoNombre = obtenerSiguienteNombre(base.etiqueta, mesasTemp)\n        const nuevaMesa: Mesa = {\n          ...base,\n          id: nuevoId,\n          x: base.x + offsetX,\n          y: base.y + offsetY,\n          etiqueta: nuevoNombre,\n          bloqueada: false,\n        }\n        nuevasMesas.push(nuevaMesa)\n        mesasTemp.push(nuevaMesa)\n      })\n\n      setMesas((prev) => [...prev, ...nuevasMesas])\n      setIdsSeleccionados(nuevasMesas.map((m) => m.id))\n    },\n    [mesas],\n  )\n\n  const duplicarMesasSeleccionadas = useCallback(() => {\n    if (idsSeleccionados.length > 0) {\n      guardarHistorial()\n      const seleccionadas = mesas.filter((m) => idsSeleccionados.includes(m.id))\n      insertarNuevasMesas(seleccionadas, 40, 40)\n    }\n  }, [idsSeleccionados, mesas, guardarHistorial, insertarNuevasMesas])\n\n  const eliminarSeleccionadas = useCallback(() => {\n    setMesas(mesas.filter((m) => !idsSeleccionados.includes(m.id)))\n    setIdsSeleccionados([])\n  }, [mesas, idsSeleccionados])\n\n  const toggleBloqueo = useCallback(() => {\n    if (idsSeleccionados.length === 0) return\n    guardarHistorial()\n    const mesasSeleccionadas = mesas.filter((m) => idsSeleccionados.includes(m.id))\n    const todasBloqueadas = mesasSeleccionadas.every((m) => m.bloqueada)\n    setMesas((prev) => prev.map((m) => (idsSeleccionados.includes(m.id) ? { ...m, bloqueada: !todasBloqueadas } : m)))\n  }, [idsSeleccionados, mesas, guardarHistorial])\n\n  const actualizarMesa = useCallback(\n    (k: string, v: any) => {\n      setMesas((prevMesas) =>\n        prevMesas.map((m) => {\n          if (idsSeleccionados.includes(m.id)) {\n            if (k === \"forma\" && v === \"circulo\") {\n              const maxDimension = Math.max(m.ancho, m.alto)\n              return { ...m, forma: v, ancho: maxDimension, alto: maxDimension }\n            }\n            if (k === \"ancho\" || k === \"alto\" || k === \"sillas\") {\n              const nAncho = k === \"ancho\" ? v : m.ancho\n              const nAlto = k === \"alto\" ? v : m.alto\n              const nSillas = k === \"sillas\" ? v : m.sillas\n              if (!esTamanoValido(m, nAncho, nAlto, nSillas)) return m\n            }\n            return { ...m, [k]: v }\n          }\n          return m\n        }),\n      )\n    },\n    [idsSeleccionados],\n  )\n\n  const actualizarDiametro = useCallback(\n    (d: number) => {\n      setMesas((prevMesas) =>\n        prevMesas.map((m) => {\n          if (idsSeleccionados.includes(m.id)) {\n            if (!esTamanoValido(m, d, d)) return m\n            return { ...m, ancho: d, alto: d }\n          }\n          return m\n        }),\n      )\n    },\n    [idsSeleccionados],\n  )\n\n  const toggleLado = useCallback(\n    (lado: string) => {\n      guardarHistorial()\n      setMesas((prevMesas) =>\n        prevMesas.map((m) => {\n          if (idsSeleccionados.includes(m.id)) {\n            const act = m.ladosActivos || [\"top\", \"bottom\", \"left\", \"right\"]\n            return { ...m, ladosActivos: act.includes(lado) ? act.filter((l) => l !== lado) : [...act, lado] }\n          }\n          return m\n        }),\n      )\n    },\n    [idsSeleccionados, guardarHistorial],\n  )\n\n  const confirmarNombreMesa = useCallback(() => {\n    if (!editandoNombreMesa) return\n    setMesas((prev) =>\n      prev.map((m) =>\n        m.id === editandoNombreMesa.id ? { ...m, etiqueta: editandoNombreMesa.valor || m.etiqueta } : m,\n      ),\n    )\n    setEditandoNombreMesa(null)\n  }, [editandoNombreMesa])\n\n  // --- CONFIGURACIÓN INICIAL ---\n  const confirmarSectorUnico = useCallback(() => {\n    setSectores([\n      { id: \"S1\", nombre: configSectorUnico.nombre, color: configSectorUnico.color, precio: configSectorUnico.precio },\n    ])\n    setMesas([\n      {\n        id: \"T1\",\n        x: 0,\n        y: 0,\n        etiqueta: \"Mesa 1\",\n        forma: \"cuadrado\",\n        sillas: 8,\n        ancho: 120,\n        alto: 200,\n        escala: 1,\n        sectorId: \"S1\",\n        ladosActivos: [\"top\", \"bottom\", \"left\", \"right\"],\n        bloqueada: false,\n        espacioEntreSillas: 50, // valor por defecto\n      },\n    ])\n    setTipoMapa(\"sector\")\n    setModoConfigurado(true)\n    centrarlVista()\n  }, [configSectorUnico, centrarlVista])\n\n  const iniciarMapaCompleto = useCallback(() => {\n    setTipoMapa(\"completo\")\n    setSectores([\n      { id: \"S1\", nombre: \"General\", color: \"#94a3b8\", precio: 50 },\n      { id: \"S2\", nombre: \"VIP\", color: \"#8B6FFA\", precio: 150 },\n    ])\n    setMesas([\n      {\n        id: \"T1\",\n        x: 0,\n        y: 0,\n        etiqueta: \"Mesa 1\",\n        forma: \"circulo\",\n        sillas: 4,\n        ancho: 110,\n        alto: 110,\n        escala: 1,\n        sectorId: \"S1\",\n        ladosActivos: [\"top\", \"bottom\", \"left\", \"right\"],\n        bloqueada: false,\n        espacioEntreSillas: 50, // valor por defecto\n      },\n    ])\n    setModoConfigurado(true)\n    centrarlVista()\n  }, [centrarlVista])\n\n  // --- INTERACCIONES DEL MOUSE ---\n  const alPresionarMouse = useCallback(\n    (e: React.MouseEvent, tipo: string, mesa: Mesa | null = null) => {\n      if (herramientaActiva === \"mano\" || e.button === 1) {\n        setIsPanning(true)\n        panStart.current = { x: e.clientX - pan.x, y: e.clientY - pan.y }\n        return\n      }\n\n      const mousePos = getMousePos(e.clientX, e.clientY)\n\n      if (tipo === \"mesa\" && mesa) {\n        e.stopPropagation()\n\n        if (mesa.bloqueada && !e.shiftKey) {\n          setIdsSeleccionados([mesa.id])\n          setPanelActivo(\"propiedades\")\n          return\n        }\n\n        tomarSnapshot()\n\n        let nuevosIdsSeleccionados = [...idsSeleccionados]\n\n        if (e.shiftKey) {\n          if (idsSeleccionados.includes(mesa.id)) {\n            nuevosIdsSeleccionados = idsSeleccionados.filter((id) => id !== mesa.id)\n          } else {\n            nuevosIdsSeleccionados.push(mesa.id)\n          }\n        } else {\n          if (!idsSeleccionados.includes(mesa.id)) {\n            nuevosIdsSeleccionados = [mesa.id]\n          }\n        }\n\n        const mesasParaArrastrar = mesas.filter((m) => nuevosIdsSeleccionados.includes(m.id))\n        const algunaBloqueada = mesasParaArrastrar.some((m) => m.bloqueada)\n\n        if (algunaBloqueada) {\n          setIdsSeleccionados(nuevosIdsSeleccionados)\n          setPanelActivo(\"propiedades\")\n          return\n        }\n\n        if (e.altKey && nuevosIdsSeleccionados.length > 0) {\n          const mesasADuplicar = mesas.filter((m) => nuevosIdsSeleccionados.includes(m.id))\n          const nuevasMesas: Mesa[] = []\n          const mapeoIds: { [key: string]: string } = {}\n\n          const mesasTemp = [...mesas]\n          mesasADuplicar.forEach((base) => {\n            const nuevoId = obtenerSiguienteId(mesasTemp)\n            const nuevoNombre = obtenerSiguienteNombre(base.etiqueta, mesasTemp)\n            const nuevaMesa: Mesa = { ...base, id: nuevoId, etiqueta: nuevoNombre, bloqueada: false }\n            nuevasMesas.push(nuevaMesa)\n            mesasTemp.push(nuevaMesa)\n            mapeoIds[base.id] = nuevoId\n          })\n\n          setMesas((prev) => [...prev, ...nuevasMesas])\n\n          const nuevosIds = nuevasMesas.map((m) => m.id)\n          setIdsSeleccionados(nuevosIds)\n          nuevosIdsSeleccionados = nuevosIds\n\n          const offsets: { [key: string]: { x: number; y: number } } = {}\n          nuevasMesas.forEach((m) => {\n            offsets[m.id] = { x: mousePos.x - m.x, y: mousePos.y - m.y }\n          })\n          setOffsetsMesas(offsets)\n          setIdMesaArrastradaPrincipal(mapeoIds[mesa.id])\n          setArrastrandoMesa(true)\n          setPanelActivo(\"propiedades\")\n          return\n        }\n\n        setIdsSeleccionados(nuevosIdsSeleccionados)\n        setArrastrandoMesa(true)\n        setPanelActivo(\"propiedades\")\n        setIdMesaArrastradaPrincipal(mesa.id)\n\n        const offsets: { [key: string]: { x: number; y: number } } = {}\n        mesas.forEach((m) => {\n          if (nuevosIdsSeleccionados.includes(m.id)) {\n            offsets[m.id] = { x: mousePos.x - m.x, y: mousePos.y - m.y }\n          }\n        })\n        setOffsetsMesas(offsets)\n      } else if (tipo === \"lienzo\") {\n        if (!e.shiftKey) {\n          setIdsSeleccionados([])\n          setCajaSeleccion({ startX: mousePos.x, startY: mousePos.y, currentX: mousePos.x, currentY: mousePos.y })\n          setMenuDescargaAbierto(false)\n        } else {\n          setCajaSeleccion({ startX: mousePos.x, startY: mousePos.y, currentX: mousePos.x, currentY: mousePos.y })\n        }\n      }\n    },\n    [herramientaActiva, pan, getMousePos, idsSeleccionados, mesas, tomarSnapshot],\n  )\n\n  const manejarDobleClickMesa = useCallback(\n    (mesa: Mesa) => {\n      if (mesa.bloqueada || !referenciaSvg.current) return\n\n      const rect = referenciaSvg.current.getBoundingClientRect()\n      const screenX = mesa.x * zoom + pan.x + rect.left\n      const screenY = mesa.y * zoom + pan.y + rect.top - 20\n\n      setEditandoNombreMesa({\n        id: mesa.id,\n        x: screenX,\n        y: screenY,\n        valor: mesa.etiqueta,\n      })\n    },\n    [zoom, pan],\n  )\n\n  const alMoverMouse = useCallback(\n    (e: React.MouseEvent) => {\n      if (isPanning) {\n        setPan({ x: e.clientX - panStart.current.x, y: e.clientY - panStart.current.y })\n        return\n      }\n\n      const mousePos = getMousePos(e.clientX, e.clientY)\n\n      if (arrastrandoMesa && idsSeleccionados.length > 0) {\n        const mesaPrincipal = mesas.find((m) => m.id === idMesaArrastradaPrincipal)\n        if (!mesaPrincipal) return\n\n        const offsetPrincipal = offsetsMesas[mesaPrincipal.id] || { x: 0, y: 0 }\n        let nuevoX = mousePos.x - offsetPrincipal.x\n        let nuevoY = mousePos.y - offsetPrincipal.y\n\n        const otrasMesas = mesas.filter((m) => !idsSeleccionados.includes(m.id))\n        const umbral = UMBRAL_SNAP / zoom\n        const nuevasGuias: Guia[] = []\n\n        const w = mesaPrincipal.ancho * (mesaPrincipal.escala || 1)\n        const h = mesaPrincipal.alto * (mesaPrincipal.escala || 1)\n        const misPuntosX = { c: nuevoX, l: nuevoX - w / 2, r: nuevoX + w / 2 }\n        const misPuntosY = { c: nuevoY, t: nuevoY - h / 2, b: nuevoY + h / 2 }\n\n        let snapX = false\n        let snapY = false\n\n        for (const otra of otrasMesas) {\n          const ow = otra.ancho * (otra.escala || 1)\n          const oh = otra.alto * (otra.escala || 1)\n          const objetivosX = [otra.x, otra.x - ow / 2, otra.x + ow / 2]\n\n          if (!snapX) {\n            for (const target of objetivosX) {\n              if (Math.abs(misPuntosX.c - target) < umbral) {\n                nuevoX = target\n                snapX = true\n                nuevasGuias.push({ type: \"v\", pos: target })\n                break\n              }\n              if (Math.abs(misPuntosX.l - target) < umbral) {\n                nuevoX = target + w / 2\n                snapX = true\n                nuevasGuias.push({ type: \"v\", pos: target })\n                break\n              }\n              if (Math.abs(misPuntosX.r - target) < umbral) {\n                nuevoX = target - w / 2\n                snapX = true\n                nuevasGuias.push({ type: \"v\", pos: target })\n                break\n              }\n            }\n          }\n\n          const objetivosY = [otra.y, otra.y - oh / 2, otra.y + oh / 2]\n          if (!snapY) {\n            for (const target of objetivosY) {\n              if (Math.abs(misPuntosY.c - target) < umbral) {\n                nuevoY = target\n                snapY = true\n                nuevasGuias.push({ type: \"h\", pos: target })\n                break\n              }\n              if (Math.abs(misPuntosY.t - target) < umbral) {\n                nuevoY = target + h / 2\n                snapY = true\n                nuevasGuias.push({ type: \"h\", pos: target })\n                break\n              }\n              if (Math.abs(misPuntosY.b - target) < umbral) {\n                nuevoY = target - h / 2\n                snapY = true\n                nuevasGuias.push({ type: \"h\", pos: target })\n                break\n              }\n            }\n          }\n          if (snapX && snapY) break\n        }\n\n        setGuias(nuevasGuias)\n\n        const deltaX = nuevoX - mesaPrincipal.x\n        const deltaY = nuevoY - mesaPrincipal.y\n\n        setMesas((prev) =>\n          prev.map((m) => (idsSeleccionados.includes(m.id) ? { ...m, x: m.x + deltaX, y: m.y + deltaY } : m)),\n        )\n      } else if (cajaSeleccion) {\n        setCajaSeleccion({ ...cajaSeleccion, currentX: mousePos.x, currentY: mousePos.y })\n      }\n    },\n    [\n      isPanning,\n      getMousePos,\n      arrastrandoMesa,\n      idsSeleccionados,\n      mesas,\n      idMesaArrastradaPrincipal,\n      offsetsMesas,\n      zoom,\n      cajaSeleccion,\n    ],\n  )\n\n  const alSoltarMouse = useCallback(() => {\n    if (cajaSeleccion) {\n      const x1 = Math.min(cajaSeleccion.startX, cajaSeleccion.currentX)\n      const x2 = Math.max(cajaSeleccion.startX, cajaSeleccion.currentX)\n      const y1 = Math.min(cajaSeleccion.startY, cajaSeleccion.currentY)\n      const y2 = Math.max(cajaSeleccion.startY, cajaSeleccion.currentY)\n\n      const mesasEnCaja = mesas\n        .filter((m) => {\n          const escala = m.escala || 1\n          const ancho = m.ancho * escala\n          const alto = m.alto * escala\n          const mesaLeft = m.x - ancho / 2\n          const mesaRight = m.x + ancho / 2\n          const mesaTop = m.y - alto / 2\n          const mesaBottom = m.y + alto / 2\n\n          return !(mesaRight < x1 || mesaLeft > x2 || mesaBottom < y1 || mesaTop > y2)\n        })\n        .map((m) => m.id)\n\n      setIdsSeleccionados((prev) => [...new Set([...prev, ...mesasEnCaja])])\n      setCajaSeleccion(null)\n    }\n\n    if (arrastrandoMesa) {\n      confirmarSnapshotSiHuboCambios()\n    }\n\n    setArrastrandoMesa(false)\n    setIsPanning(false)\n    setGuias([])\n    setIdMesaArrastradaPrincipal(null)\n  }, [cajaSeleccion, mesas, arrastrandoMesa, confirmarSnapshotSiHuboCambios])\n\n  // --- HANDLERS DE TOUCH (MOBILE) ---\n  const getTouchPos = useCallback(\n    (clientX: number, clientY: number) => {\n      const contenedor = contenedorRef.current\n      if (!contenedor) return { x: 0, y: 0 }\n      const rect = contenedor.getBoundingClientRect()\n      return {\n        x: (clientX - rect.left - pan.x) / zoom,\n        y: (clientY - rect.top - pan.y) / zoom,\n      }\n    },\n    [pan, zoom],\n  )\n\n  const alPresionarTouch = useCallback(\n    (e: React.TouchEvent, tipo: string, mesa: Mesa | null = null) => {\n      e.preventDefault()\n\n      const touches = e.touches\n\n      // Pinch-to-zoom con 2 dedos\n      if (touches.length === 2) {\n        const dx = touches[0].clientX - touches[1].clientX\n        const dy = touches[0].clientY - touches[1].clientY\n        lastTouchDistance.current = Math.hypot(dx, dy)\n        lastTouchCenter.current = {\n          x: (touches[0].clientX + touches[1].clientX) / 2,\n          y: (touches[0].clientY + touches[1].clientY) / 2,\n        }\n        return\n      }\n\n      // Un solo dedo\n      if (touches.length === 1) {\n        const touch = touches[0]\n\n        // Si herramienta mano o toque en lienzo sin mesa -> pan\n        if (herramientaActiva === \"mano\" || (tipo === \"lienzo\" && !mesa)) {\n          setIsPanning(true)\n          panStart.current = { x: touch.clientX - pan.x, y: touch.clientY - pan.y }\n          return\n        }\n\n        const touchPos = getTouchPos(touch.clientX, touch.clientY)\n\n        if (tipo === \"mesa\" && mesa) {\n          e.stopPropagation()\n\n          if (mesa.bloqueada) {\n            setIdsSeleccionados([mesa.id])\n            setPanelActivo(\"propiedades\")\n            return\n          }\n\n          tomarSnapshot()\n          setIdsSeleccionados([mesa.id])\n          setArrastrandoMesa(true)\n          setPanelActivo(\"propiedades\")\n          setIdMesaArrastradaPrincipal(mesa.id)\n\n          const offsets: { [key: string]: { x: number; y: number } } = {}\n          offsets[mesa.id] = { x: touchPos.x - mesa.x, y: touchPos.y - mesa.y }\n          setOffsetsMesas(offsets)\n        } else if (tipo === \"lienzo\") {\n          setIdsSeleccionados([])\n          setMenuDescargaAbierto(false)\n        }\n      }\n    },\n    [herramientaActiva, pan, getTouchPos, tomarSnapshot],\n  )\n\n  const alMoverTouch = useCallback(\n    (e: React.TouchEvent) => {\n      e.preventDefault()\n      const touches = e.touches\n\n      // Pinch-to-zoom\n      if (touches.length === 2 && lastTouchDistance.current !== null) {\n        const dx = touches[0].clientX - touches[1].clientX\n        const dy = touches[0].clientY - touches[1].clientY\n        const newDistance = Math.hypot(dx, dy)\n\n        const scale = newDistance / lastTouchDistance.current\n        const newZoom = Math.min(Math.max(zoom * scale, 0.1), 3)\n\n        setZoom(newZoom)\n        lastTouchDistance.current = newDistance\n        return\n      }\n\n      // Un solo dedo\n      if (touches.length === 1) {\n        const touch = touches[0]\n\n        if (isPanning) {\n          setPan({\n            x: touch.clientX - panStart.current.x,\n            y: touch.clientY - panStart.current.y,\n          })\n          return\n        }\n\n        const touchPos = getTouchPos(touch.clientX, touch.clientY)\n\n        if (arrastrandoMesa && idsSeleccionados.length > 0) {\n          const mesaPrincipal = mesas.find((m) => m.id === idMesaArrastradaPrincipal)\n          if (!mesaPrincipal) return\n\n          const offsetPrincipal = offsetsMesas[mesaPrincipal.id] || { x: 0, y: 0 }\n          let nuevoX = touchPos.x - offsetPrincipal.x\n          let nuevoY = touchPos.y - offsetPrincipal.y\n\n          // Snap a otras mesas\n          const otrasMesas = mesas.filter((m) => !idsSeleccionados.includes(m.id))\n          const umbral = UMBRAL_SNAP / zoom\n          const nuevasGuias: Guia[] = []\n\n          const w = mesaPrincipal.ancho * (mesaPrincipal.escala || 1)\n          const h = mesaPrincipal.alto * (mesaPrincipal.escala || 1)\n          const misPuntosX = { c: nuevoX, l: nuevoX - w / 2, r: nuevoX + w / 2 }\n          const misPuntosY = { c: nuevoY, t: nuevoY - h / 2, b: nuevoY + h / 2 }\n\n          let snapX = false\n          let snapY = false\n\n          for (const otra of otrasMesas) {\n            const ow = otra.ancho * (otra.escala || 1)\n            const oh = otra.alto * (otra.escala || 1)\n            const objetivosX = [otra.x, otra.x - ow / 2, otra.x + ow / 2]\n\n            if (!snapX) {\n              for (const target of objetivosX) {\n                if (Math.abs(misPuntosX.c - target) < umbral) {\n                  nuevoX = target\n                  snapX = true\n                  nuevasGuias.push({ type: \"v\", pos: target })\n                  break\n                }\n                if (Math.abs(misPuntosX.l - target) < umbral) {\n                  nuevoX = target + w / 2\n                  snapX = true\n                  nuevasGuias.push({ type: \"v\", pos: target })\n                  break\n                }\n                if (Math.abs(misPuntosX.r - target) < umbral) {\n                  nuevoX = target - w / 2\n                  snapX = true\n                  nuevasGuias.push({ type: \"v\", pos: target })\n                  break\n                }\n              }\n            }\n\n            const objetivosY = [otra.y, otra.y - oh / 2, otra.y + oh / 2]\n            if (!snapY) {\n              for (const target of objetivosY) {\n                if (Math.abs(misPuntosY.c - target) < umbral) {\n                  nuevoY = target\n                  snapY = true\n                  nuevasGuias.push({ type: \"h\", pos: target })\n                  break\n                }\n                if (Math.abs(misPuntosY.t - target) < umbral) {\n                  nuevoY = target + h / 2\n                  snapY = true\n                  nuevasGuias.push({ type: \"h\", pos: target })\n                  break\n                }\n                if (Math.abs(misPuntosY.b - target) < umbral) {\n                  nuevoY = target - h / 2\n                  snapY = true\n                  nuevasGuias.push({ type: \"h\", pos: target })\n                  break\n                }\n              }\n            }\n            if (snapX && snapY) break\n          }\n\n          setGuias(nuevasGuias)\n\n          const deltaX = nuevoX - mesaPrincipal.x\n          const deltaY = nuevoY - mesaPrincipal.y\n\n          setMesas((prev) =>\n            prev.map((m) => (idsSeleccionados.includes(m.id) ? { ...m, x: m.x + deltaX, y: m.y + deltaY } : m)),\n          )\n        }\n      }\n    },\n    [isPanning, getTouchPos, arrastrandoMesa, idsSeleccionados, mesas, idMesaArrastradaPrincipal, offsetsMesas, zoom],\n  )\n\n  const alSoltarTouch = useCallback(() => {\n    lastTouchDistance.current = null\n    lastTouchCenter.current = null\n\n    if (arrastrandoMesa) {\n      confirmarSnapshotSiHuboCambios()\n    }\n\n    setArrastrandoMesa(false)\n    setIsPanning(false)\n    setGuias([])\n  }, [arrastrandoMesa, confirmarSnapshotSiHuboCambios])\n\n  // --- IO ---\n  const manejarSubidaImagen = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    const f = e.target.files?.[0]\n    if (f) {\n      const r = new FileReader()\n      r.onload = (ev) => {\n        const i = new Image()\n        i.crossOrigin = \"anonymous\"\n        i.onload = () => {\n          setImagenFondo(ev.target?.result as string)\n          setDimensionesImagen({ w: i.width, h: i.height })\n        }\n        i.src = ev.target?.result as string\n      }\n      r.readAsDataURL(f)\n    }\n  }, [])\n\n  const handleExportarSVG = useCallback(() => {\n    if (referenciaSvg.current) {\n      exportarSVG(referenciaSvg.current, mesas, imagenFondo, dimensionesImagen, tipoMapa)\n      setMenuDescargaAbierto(false)\n    }\n  }, [mesas, imagenFondo, dimensionesImagen, tipoMapa])\n\n  const handleDescargarJSON = useCallback(() => {\n    descargarJSON(mesas, sectores, tipoMapa, imagenFondo, dimensionesImagen)\n    setMenuDescargaAbierto(false)\n  }, [mesas, sectores, tipoMapa, imagenFondo, dimensionesImagen])\n\n  // --- ATAJOS DE TECLADO ---\n  useEffect(() => {\n    const manejarKeyDown = (e: KeyboardEvent) => {\n      if ((e.target as HTMLElement).tagName === \"INPUT\") return\n\n      console.log(\"[v0] Key pressed:\", e.key, \"Code:\", e.code, \"Shift:\", e.shiftKey)\n\n      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === \"z\") {\n        e.preventDefault()\n        if (e.shiftKey) rehacer()\n        else deshacer()\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === \"y\") {\n        e.preventDefault()\n        rehacer()\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"1\") {\n        e.preventDefault()\n        zoomToFit()\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"2\") {\n        e.preventDefault()\n        zoomToSelection()\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"0\") {\n        e.preventDefault()\n        centrarlVista()\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === \"l\") {\n        e.preventDefault()\n        toggleBloqueo()\n      }\n      if (e.key === \"Escape\") {\n        if (mostrarAyudaAtajos) setMostrarAyudaAtajos(false)\n        else if (idsSeleccionados.length > 0) setIdsSeleccionados([])\n      }\n      if (e.key === \"?\" || e.key === \"¿\" || e.code === \"Slash\" || (e.shiftKey && e.key === \"/\")) {\n        e.preventDefault()\n        setMostrarAyudaAtajos((prev) => !prev)\n      }\n      if (e.key === \"v\") setHerramienta(\"seleccion\")\n      if (e.key === \"h\") setHerramienta(\"mano\")\n      if (e.key === \" \") {\n        e.preventDefault()\n        if (herramienta !== \"mano\") setHerramientaTemporal(\"mano\")\n      }\n      if ([\"ArrowUp\", \"ArrowDown\", \"ArrowLeft\", \"ArrowRight\"].includes(e.key)) {\n        if (idsSeleccionados.length > 0) {\n          const mesasSeleccionadas = mesas.filter((m) => idsSeleccionados.includes(m.id))\n          if (mesasSeleccionadas.some((m) => m.bloqueada)) return\n\n          e.preventDefault()\n          const distancia = e.shiftKey ? 10 : 1\n          let deltaX = 0\n          let deltaY = 0\n\n          if (e.key === \"ArrowUp\") deltaY = -distancia\n          if (e.key === \"ArrowDown\") deltaY = distancia\n          if (e.key === \"ArrowLeft\") deltaX = -distancia\n          if (e.key === \"ArrowRight\") deltaX = distancia\n\n          guardarHistorial()\n          setMesas((prev) =>\n            prev.map((m) => (idsSeleccionados.includes(m.id) ? { ...m, x: m.x + deltaX, y: m.y + deltaY } : m)),\n          )\n        }\n      }\n      if (e.key === \"Delete\" || e.key === \"Backspace\") {\n        if (idsSeleccionados.length > 0) {\n          guardarHistorial()\n          eliminarSeleccionadas()\n        }\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"c\") {\n        if (idsSeleccionados.length > 0) {\n          const aCopiar = mesas.filter((m) => idsSeleccionados.includes(m.id))\n          aCopiar.sort((a, b) => a.y - b.y || a.x - b.x)\n          setMesasPortapapeles(aCopiar)\n        }\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"v\") {\n        if (mesasPortapapeles.length > 0) {\n          guardarHistorial()\n          insertarNuevasMesas(mesasPortapapeles, 20, 20)\n        }\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"d\") {\n        e.preventDefault()\n        duplicarMesasSeleccionadas()\n      }\n      if ((e.ctrlKey || e.metaKey) && e.key === \"a\") {\n        e.preventDefault()\n        setIdsSeleccionados(mesas.map((m) => m.id))\n      }\n    }\n\n    const manejarKeyUp = (e: KeyboardEvent) => {\n      if (e.key === \" \") {\n        if (herramientaTemporal === \"mano\") setHerramientaTemporal(null)\n      }\n    }\n\n    window.addEventListener(\"keydown\", manejarKeyDown)\n    window.addEventListener(\"keyup\", manejarKeyUp)\n    return () => {\n      window.removeEventListener(\"keydown\", manejarKeyDown)\n      window.removeEventListener(\"keyup\", manejarKeyUp)\n    }\n  }, [\n    idsSeleccionados,\n    mesas,\n    mesasPortapapeles,\n    herramientaTemporal,\n    herramienta,\n    mostrarAyudaAtajos,\n    deshacer,\n    rehacer,\n    zoomToFit,\n    zoomToSelection,\n    centrarlVista,\n    toggleBloqueo,\n    guardarHistorial,\n    eliminarSeleccionadas,\n    duplicarMesasSeleccionadas,\n    insertarNuevasMesas,\n  ])\n\n  // --- WHEEL / ZOOM ---\n  useEffect(() => {\n    const contenedor = contenedorRef.current\n    if (!contenedor) return\n\n    const handleWheel = (e: WheelEvent) => {\n      e.preventDefault()\n      if (!referenciaSvg.current) return\n\n      const rect = referenciaSvg.current.getBoundingClientRect()\n      const mouseX = e.clientX - rect.left\n      const mouseY = e.clientY - rect.top\n\n      if (e.ctrlKey) {\n        const scaleFactor = 0.05\n        const direction = -Math.sign(e.deltaY)\n        const newZoom = Math.max(0.1, Math.min(5, zoom + direction * scaleFactor))\n        const newPanX = mouseX - (mouseX - pan.x) * (newZoom / zoom)\n        const newPanY = mouseY - (mouseY - pan.y) * (newZoom / zoom)\n        setZoom(newZoom)\n        setPan({ x: newPanX, y: newPanY })\n      } else {\n        setPan((prev) => ({ x: prev.x - e.deltaX, y: prev.y - e.deltaY }))\n      }\n    }\n\n    contenedor.addEventListener(\"wheel\", handleWheel, { passive: false })\n    return () => contenedor.removeEventListener(\"wheel\", handleWheel)\n  }, [zoom, pan])\n\n  useEffect(() => {\n    const preventGlobalZoom = (e: WheelEvent) => {\n      if (e.ctrlKey) e.preventDefault()\n    }\n    document.addEventListener(\"wheel\", preventGlobalZoom, { passive: false })\n    return () => document.removeEventListener(\"wheel\", preventGlobalZoom)\n  }, [])\n\n  // --- ZOOM TO FIT INICIAL ---\n  useEffect(() => {\n    if (!vistaCentradaInicial && referenciaSvg.current && mesas.length > 0) {\n      const timer = setTimeout(() => {\n        zoomToFit()\n        setVistaCentradaInicial(true)\n      }, 100)\n      return () => clearTimeout(timer)\n    }\n  }, [mesas, vistaCentradaInicial, zoomToFit])\n\n  useEffect(() => {\n    const preventGlobalZoom = (e: WheelEvent) => {\n      if (e.ctrlKey) e.preventDefault()\n    }\n    document.addEventListener(\"wheel\", preventGlobalZoom, { passive: false })\n    return () => document.removeEventListener(\"wheel\", preventGlobalZoom)\n  }, [])\n\n  // --- FOCUS INPUT NOMBRE ---\n  useEffect(() => {\n    if (editandoNombreMesa && inputNombreRef.current) {\n      inputNombreRef.current.focus()\n      inputNombreRef.current.select()\n    }\n  }, [editandoNombreMesa])\n\n  // --- VARIABLES CALCULADAS ---\n  const mesaActiva = useMemo(\n    () =>\n      idsSeleccionados.length > 0\n        ? mesas.find((m) => m.id === idsSeleccionados[idsSeleccionados.length - 1]) || null\n        : null,\n    [mesas, idsSeleccionados],\n  )\n\n  const hayMesasBloqueadas = useMemo(\n    () => mesas.filter((m) => idsSeleccionados.includes(m.id)).some((m) => m.bloqueada),\n    [mesas, idsSeleccionados],\n  )\n\n  const limitesSlider = useMemo(() => {\n    if (!mesaActiva) return { minW: 50, minH: 50 }\n    return calcularLimites(mesaActiva)\n  }, [mesaActiva])\n\n  const cursorStyle = useMemo(() => {\n    if (herramientaActiva === \"mano\") return isPanning ? \"grabbing\" : \"grab\"\n    return \"default\"\n  }, [herramientaActiva, isPanning])\n\n  return {\n    // Estado de configuración\n    modoConfigurado,\n    pasoModal,\n    setPasoModal,\n    tipoMapa,\n    configSectorUnico,\n    setConfigSectorUnico,\n    confirmarSectorUnico,\n    iniciarMapaCompleto,\n\n    // Datos principales\n    mesas,\n    setMesas,\n    sectores,\n    idsSeleccionados,\n    setIdsSeleccionados,\n\n    // Navegación\n    zoom,\n    setZoom,\n    pan,\n    herramienta,\n    setHerramienta,\n    herramientaActiva,\n    isPanning,\n    cursorStyle,\n\n    // UI state\n    panelActivo,\n    setPanelActivo,\n    imagenFondo,\n    dimensionesImagen,\n    menuDescargaAbierto,\n    setMenuDescargaAbierto,\n    mostrarAyudaAtajos,\n    setMostrarAyudaAtajos,\n    editandoNombreMesa,\n    setEditandoNombreMesa,\n    guias,\n    cajaSeleccion,\n\n    // Historial\n    puedeDeshacer,\n    puedeRehacer,\n    deshacer,\n    rehacer,\n    guardarHistorial,\n\n    // Acciones de mesas\n    agregarMesa,\n    duplicarMesasSeleccionadas,\n    eliminarSeleccionadas,\n    toggleBloqueo,\n    actualizarMesa,\n    actualizarDiametro,\n    toggleLado,\n    confirmarNombreMesa,\n\n    // Acciones de sectores\n    agregarSector,\n    actualizarSector,\n    eliminarSector,\n\n    // Acciones de navegación\n    centrarlVista,\n    zoomToFit,\n    zoomToSelection,\n\n    // Handlers de mouse\n    alPresionarMouse,\n    alMoverMouse,\n    alSoltarMouse,\n    manejarDobleClickMesa,\n\n    // Handlers de touch (mobile)\n    alPresionarTouch,\n    alMoverTouch,\n    alSoltarTouch,\n\n    // IO\n    manejarSubidaImagen,\n    handleExportarSVG,\n    handleDescargarJSON,\n\n    // Refs\n    referenciaSvg,\n    contenedorRef,\n    inputNombreRef,\n    inputArchivoRef,\n\n    // Computed\n    mesaActiva,\n    hayMesasBloqueadas,\n    limitesSlider,\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1888, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/hooks/use-is-mac.ts"],"sourcesContent":["\"use client\"\n\nimport { useState, useEffect } from \"react\"\n\nexport function useIsMac() {\n  const [isMac, setIsMac] = useState(false)\n\n  useEffect(() => {\n    setIsMac(navigator.platform.toUpperCase().indexOf(\"MAC\") >= 0)\n  }, [])\n\n  return isMac\n}\n"],"names":[],"mappings":";;;;AAEA;AAFA;;AAIO,SAAS;IACd,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,iNAAQ,EAAC;IAEnC,IAAA,kNAAS,EAAC;QACR,SAAS,UAAU,QAAQ,CAAC,WAAW,GAAG,OAAO,CAAC,UAAU;IAC9D,GAAG,EAAE;IAEL,OAAO;AACT"}},
    {"offset": {"line": 1906, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/ui/tooltip-custom.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\nimport { useState, useRef } from \"react\"\nimport ReactDOM from \"react-dom\"\n\ntype TooltipPosition = \"top\" | \"right\" | \"left\" | \"bottom\"\n\ninterface TooltipProps {\n  children: React.ReactNode\n  label: string\n  shortcut?: string\n  isMac: boolean\n  position?: TooltipPosition\n}\n\nconst formatShortcut = (s: string, isMac: boolean): string => {\n  if (isMac) {\n    return s\n      .replace(/Ctrl/g, \"⌘\")\n      .replace(/Alt/g, \"⌥\")\n      .replace(/Shift/g, \"⇧\")\n      .replace(/Delete/g, \"⌫\")\n  }\n  return s\n}\n\nexport function TooltipProvider({ children }: { children: React.ReactNode }) {\n  return <>{children}</>\n}\n\nexport function Tooltip({ children, label, shortcut, isMac, position = \"top\" }: TooltipProps) {\n  const [show, setShow] = useState(false)\n  const [coords, setCoords] = useState({ x: 0, y: 0 })\n  const triggerRef = useRef<HTMLDivElement>(null)\n\n  const handleMouseEnter = () => {\n    if (triggerRef.current) {\n      const rect = triggerRef.current.getBoundingClientRect()\n      let x = 0\n      let y = 0\n\n      switch (position) {\n        case \"top\":\n          x = rect.left + rect.width / 2\n          y = rect.top - 8\n          break\n        case \"bottom\":\n          x = rect.left + rect.width / 2\n          y = rect.bottom + 8\n          break\n        case \"left\":\n          x = rect.left - 8\n          y = rect.top + rect.height / 2\n          break\n        case \"right\":\n          x = rect.right + 8\n          y = rect.top + rect.height / 2\n          break\n      }\n      setCoords({ x, y })\n    }\n    setShow(true)\n  }\n\n  const getTransformStyle = () => {\n    switch (position) {\n      case \"top\":\n        return \"translate(-50%, -100%)\"\n      case \"bottom\":\n        return \"translate(-50%, 0)\"\n      case \"left\":\n        return \"translate(-100%, -50%)\"\n      case \"right\":\n        return \"translate(0, -50%)\"\n    }\n  }\n\n  const getArrowStyle = () => {\n    const base = \"absolute w-0 h-0 border-[6px]\"\n    switch (position) {\n      case \"top\":\n        return `${base} left-1/2 -translate-x-1/2 top-full border-t-slate-800 border-l-transparent border-r-transparent border-b-transparent`\n      case \"bottom\":\n        return `${base} left-1/2 -translate-x-1/2 bottom-full border-b-slate-800 border-l-transparent border-r-transparent border-t-transparent`\n      case \"left\":\n        return `${base} top-1/2 -translate-y-1/2 left-full border-l-slate-800 border-t-transparent border-b-transparent border-r-transparent`\n      case \"right\":\n        return `${base} top-1/2 -translate-y-1/2 right-full border-r-slate-800 border-t-transparent border-b-transparent border-l-transparent`\n    }\n  }\n\n  return (\n    <div\n      ref={triggerRef}\n      className=\"relative inline-flex\"\n      onMouseEnter={handleMouseEnter}\n      onMouseLeave={() => setShow(false)}\n    >\n      {children}\n      {show &&\n        typeof window !== \"undefined\" &&\n        ReactDOM.createPortal(\n          <div\n            className=\"fixed px-2 py-1 bg-slate-800 text-white text-xs rounded whitespace-nowrap z-[99999] pointer-events-none\"\n            style={{\n              left: coords.x,\n              top: coords.y,\n              transform: getTransformStyle(),\n            }}\n          >\n            <div className=\"flex items-center gap-1.5\">\n              <span>{label}</span>\n              {shortcut && (\n                <kbd className=\"px-1 py-0.5 bg-slate-700 rounded text-[10px] font-mono\">\n                  {formatShortcut(shortcut, isMac)}\n                </kbd>\n              )}\n            </div>\n            <div className={getArrowStyle()} />\n          </div>,\n          document.body,\n        )}\n    </div>\n  )\n}\n\nexport { formatShortcut }\n"],"names":[],"mappings":";;;;;;;;;AAGA;AACA;AAJA;;;;AAgBA,MAAM,iBAAiB,CAAC,GAAW;IACjC,IAAI,OAAO;QACT,OAAO,EACJ,OAAO,CAAC,SAAS,KACjB,OAAO,CAAC,QAAQ,KAChB,OAAO,CAAC,UAAU,KAClB,OAAO,CAAC,WAAW;IACxB;IACA,OAAO;AACT;AAEO,SAAS,gBAAgB,EAAE,QAAQ,EAAiC;IACzE,qBAAO;kBAAG;;AACZ;AAEO,SAAS,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,KAAK,EAAgB;IAC1F,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAC;IACjC,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;QAAE,GAAG;QAAG,GAAG;IAAE;IAClD,MAAM,aAAa,IAAA,+MAAM,EAAiB;IAE1C,MAAM,mBAAmB;QACvB,IAAI,WAAW,OAAO,EAAE;YACtB,MAAM,OAAO,WAAW,OAAO,CAAC,qBAAqB;YACrD,IAAI,IAAI;YACR,IAAI,IAAI;YAER,OAAQ;gBACN,KAAK;oBACH,IAAI,KAAK,IAAI,GAAG,KAAK,KAAK,GAAG;oBAC7B,IAAI,KAAK,GAAG,GAAG;oBACf;gBACF,KAAK;oBACH,IAAI,KAAK,IAAI,GAAG,KAAK,KAAK,GAAG;oBAC7B,IAAI,KAAK,MAAM,GAAG;oBAClB;gBACF,KAAK;oBACH,IAAI,KAAK,IAAI,GAAG;oBAChB,IAAI,KAAK,GAAG,GAAG,KAAK,MAAM,GAAG;oBAC7B;gBACF,KAAK;oBACH,IAAI,KAAK,KAAK,GAAG;oBACjB,IAAI,KAAK,GAAG,GAAG,KAAK,MAAM,GAAG;oBAC7B;YACJ;YACA,UAAU;gBAAE;gBAAG;YAAE;QACnB;QACA,QAAQ;IACV;IAEA,MAAM,oBAAoB;QACxB,OAAQ;YACN,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;YACT,KAAK;gBACH,OAAO;QACX;IACF;IAEA,MAAM,gBAAgB;QACpB,MAAM,OAAO;QACb,OAAQ;YACN,KAAK;gBACH,OAAO,GAAG,KAAK,qHAAqH,CAAC;YACvI,KAAK;gBACH,OAAO,GAAG,KAAK,wHAAwH,CAAC;YAC1I,KAAK;gBACH,OAAO,GAAG,KAAK,qHAAqH,CAAC;YACvI,KAAK;gBACH,OAAO,GAAG,KAAK,sHAAsH,CAAC;QAC1I;IACF;IAEA,qBACE,8OAAC;QACC,KAAK;QACL,WAAU;QACV,cAAc;QACd,cAAc,IAAM,QAAQ;;YAE3B;YACA,QACC,kDAAkB,6BAClB,uNAAQ,CAAC,YAAY,eACnB,8OAAC;gBACC,WAAU;gBACV,OAAO;oBACL,MAAM,OAAO,CAAC;oBACd,KAAK,OAAO,CAAC;oBACb,WAAW;gBACb;;kCAEA,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;0CAAM;;;;;;4BACN,0BACC,8OAAC;gCAAI,WAAU;0CACZ,eAAe,UAAU;;;;;;;;;;;;kCAIhC,8OAAC;wBAAI,WAAW;;;;;;;;;;;sBAElB,SAAS,IAAI;;;;;;;AAIvB"}},
    {"offset": {"line": 2058, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/sidebar/sidebar-izquierda.tsx"],"sourcesContent":["\"use client\"\n\nimport {\n  MousePointer2,\n  Hand,\n  Download,\n  ImageIcon,\n  XCircle,\n  Layers,\n  Edit3,\n  FileJson,\n  FileImage,\n  HelpCircle,\n} from \"lucide-react\"\nimport { TooltipProvider, Tooltip } from \"@/components/ui/tooltip-custom\"\n\nconst MesaRedondaIcon = () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    {/* Mesa circular */}\n    <circle cx=\"12\" cy=\"12\" r=\"5\" />\n    {/* Sillas alrededor */}\n    <circle cx=\"12\" cy=\"4\" r=\"1.5\" />\n    <circle cx=\"18.5\" cy=\"8\" r=\"1.5\" />\n    <circle cx=\"18.5\" cy=\"16\" r=\"1.5\" />\n    <circle cx=\"12\" cy=\"20\" r=\"1.5\" />\n    <circle cx=\"5.5\" cy=\"16\" r=\"1.5\" />\n    <circle cx=\"5.5\" cy=\"8\" r=\"1.5\" />\n  </svg>\n)\n\nconst MesaRectangularIcon = () => (\n  <svg\n    width=\"20\"\n    height=\"20\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n  >\n    {/* Mesa rectangular */}\n    <rect x=\"6\" y=\"8\" width=\"12\" height=\"8\" rx=\"1\" />\n    {/* Sillas arriba */}\n    <rect x=\"7\" y=\"3\" width=\"3\" height=\"3\" rx=\"0.5\" />\n    <rect x=\"14\" y=\"3\" width=\"3\" height=\"3\" rx=\"0.5\" />\n    {/* Sillas abajo */}\n    <rect x=\"7\" y=\"18\" width=\"3\" height=\"3\" rx=\"0.5\" />\n    <rect x=\"14\" y=\"18\" width=\"3\" height=\"3\" rx=\"0.5\" />\n  </svg>\n)\n\ninterface SidebarIzquierdaProps {\n  isMac: boolean\n  herramienta: string\n  setHerramienta: (h: string) => void\n  agregarMesa: (forma: \"circulo\" | \"cuadrado\") => void\n  tipoMapa: string\n  panelActivo: string\n  setPanelActivo: (p: string) => void\n  imagenFondo: string | null\n  onSubirImagen: () => void\n  onQuitarImagen: () => void\n  menuDescargaAbierto: boolean\n  setMenuDescargaAbierto: (open: boolean) => void\n  onExportarSVG: () => void\n  onDescargarJSON: () => void\n  onMostrarAyuda: () => void\n}\n\nexport function SidebarIzquierda({\n  isMac,\n  herramienta,\n  setHerramienta,\n  agregarMesa,\n  tipoMapa,\n  panelActivo,\n  setPanelActivo,\n  imagenFondo,\n  onSubirImagen,\n  onQuitarImagen,\n  menuDescargaAbierto,\n  setMenuDescargaAbierto,\n  onExportarSVG,\n  onDescargarJSON,\n  onMostrarAyuda,\n}: SidebarIzquierdaProps) {\n  return (\n    <TooltipProvider>\n      <div className=\"fixed left-0 top-0 h-full w-16 bg-white/90 backdrop-blur-lg shadow-xl flex flex-col items-center py-4 z-30\">\n        {/* HERRAMIENTAS SELECCION / MANO */}\n        <div className=\"w-full px-2 pb-3 flex flex-col items-center gap-1\">\n          <Tooltip label=\"Seleccionar y Mover\" shortcut=\"V\" isMac={isMac} position=\"right\">\n            <button\n              onClick={() => setHerramienta(\"seleccion\")}\n              className={`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${\n                herramienta === \"seleccion\"\n                  ? \"bg-indigo-100 text-indigo-600 ring-2 ring-indigo-200\"\n                  : \"text-slate-400 hover:text-slate-600 hover:bg-slate-50\"\n              }`}\n            >\n              <MousePointer2 size={18} />\n            </button>\n          </Tooltip>\n          <Tooltip label=\"Modo Mano\" shortcut=\"H\" isMac={isMac} position=\"right\">\n            <button\n              onClick={() => setHerramienta(\"mano\")}\n              className={`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${\n                herramienta === \"mano\"\n                  ? \"bg-indigo-100 text-indigo-600 ring-2 ring-indigo-200\"\n                  : \"text-slate-400 hover:text-slate-600 hover:bg-slate-50\"\n              }`}\n            >\n              <Hand size={18} />\n            </button>\n          </Tooltip>\n        </div>\n\n        {/* SEPARADOR */}\n        <div className=\"w-10 h-px bg-slate-200 mb-3\" />\n\n        {/* AGREGAR MESAS */}\n        <div className=\"w-full px-2 pb-3 flex flex-col items-center gap-1\">\n          <Tooltip label=\"Agregar Mesa Redonda\" isMac={isMac} position=\"right\">\n            <button\n              onClick={() => agregarMesa(\"circulo\")}\n              className=\"w-10 h-10 rounded-lg flex items-center justify-center transition-all text-slate-400 hover:text-indigo-600 hover:bg-indigo-50\"\n            >\n              <MesaRedondaIcon />\n            </button>\n          </Tooltip>\n          <Tooltip label=\"Agregar Mesa Rectangular\" isMac={isMac} position=\"right\">\n            <button\n              onClick={() => agregarMesa(\"cuadrado\")}\n              className=\"w-10 h-10 rounded-lg flex items-center justify-center transition-all text-slate-400 hover:text-indigo-600 hover:bg-indigo-50\"\n            >\n              <MesaRectangularIcon />\n            </button>\n          </Tooltip>\n        </div>\n\n        {/* SEPARADOR */}\n        <div className=\"w-10 h-px bg-slate-200 mb-3\" />\n\n        {/* SECTORES */}\n        <div className=\"w-full px-2 pb-3 flex flex-col items-center gap-1\">\n          <Tooltip label=\"Gestionar Sectores\" isMac={isMac} position=\"right\">\n            <button\n              onClick={() => setPanelActivo(\"sectores\")}\n              className={`w-10 h-10 rounded-lg flex items-center justify-center transition-all ${\n                panelActivo === \"sectores\"\n                  ? \"bg-indigo-100 text-indigo-600 ring-2 ring-indigo-200\"\n                  : \"text-slate-400 hover:text-slate-600 hover:bg-slate-50\"\n              }`}\n            >\n              {tipoMapa === \"completo\" ? <Layers size={18} /> : <Edit3 size={18} />}\n            </button>\n          </Tooltip>\n        </div>\n\n        {/* SEPARADOR */}\n        <div className=\"w-10 h-px bg-slate-200 mb-3\" />\n\n        {/* IMAGEN DE FONDO */}\n        <div className=\"w-full px-2 flex flex-col items-center\">\n          {!imagenFondo ? (\n            <Tooltip label=\"Añadir Imagen de Fondo\" isMac={isMac} position=\"right\">\n              <button\n                onClick={onSubirImagen}\n                className=\"w-10 h-10 rounded-lg flex items-center justify-center transition-all text-slate-400 hover:text-indigo-600 hover:bg-indigo-50\"\n              >\n                <ImageIcon size={18} />\n              </button>\n            </Tooltip>\n          ) : (\n            <Tooltip label=\"Quitar Imagen de Fondo\" isMac={isMac} position=\"right\">\n              <button\n                onClick={onQuitarImagen}\n                className=\"w-10 h-10 rounded-lg flex items-center justify-center transition-all text-red-400 hover:text-red-600 hover:bg-red-50\"\n              >\n                <XCircle size={18} />\n              </button>\n            </Tooltip>\n          )}\n        </div>\n\n        {/* SPACER */}\n        <div className=\"flex-1\" />\n\n        {/* MENÚ DE DESCARGA Y AYUDA */}\n        <div className=\"flex flex-col gap-1 relative w-full px-2 pb-2\">\n          {menuDescargaAbierto && (\n            <div className=\"absolute bottom-full left-2 mb-2 w-48 bg-white rounded-xl shadow-2xl border border-slate-200 overflow-hidden animate-in slide-in-from-bottom-2 fade-in duration-200 z-50\">\n              <button\n                onClick={onExportarSVG}\n                className=\"w-full text-left px-4 py-3 hover:bg-slate-50 flex items-center gap-3 text-xs font-medium text-slate-600 transition-colors border-b border-slate-100\"\n              >\n                <div className=\"p-1.5 bg-indigo-50 text-indigo-600 rounded\">\n                  <FileImage size={16} />\n                </div>\n                <div>\n                  <span className=\"block font-bold text-slate-800\">Imagen SVG</span>\n                  <span className=\"block text-[10px] text-slate-400\">Para web e impresión</span>\n                </div>\n              </button>\n              <button\n                onClick={onDescargarJSON}\n                className=\"w-full text-left px-4 py-3 hover:bg-slate-50 flex items-center gap-3 text-xs font-medium text-slate-600 transition-colors\"\n              >\n                <div className=\"p-1.5 bg-emerald-50 text-emerald-600 rounded\">\n                  <FileJson size={16} />\n                </div>\n                <div>\n                  <span className=\"block font-bold text-slate-800\">Datos JSON</span>\n                  <span className=\"block text-[10px] text-slate-400\">Guardar proyecto editable</span>\n                </div>\n              </button>\n            </div>\n          )}\n\n          <Tooltip label=\"Exportar Plano\" isMac={isMac} position=\"right\">\n            <button\n              onClick={() => setMenuDescargaAbierto(!menuDescargaAbierto)}\n              className={`w-10 h-10 mx-auto rounded-lg flex items-center justify-center transition-all ${\n                menuDescargaAbierto\n                  ? \"bg-indigo-100 text-indigo-600 ring-2 ring-indigo-200\"\n                  : \"text-slate-400 hover:text-slate-600 hover:bg-slate-50\"\n              }`}\n            >\n              <Download size={18} />\n            </button>\n          </Tooltip>\n\n          <Tooltip label=\"Mostrar Atajos\" shortcut=\"?\" isMac={isMac} position=\"right\">\n            <button\n              onClick={onMostrarAyuda}\n              className=\"w-10 h-10 mx-auto rounded-lg flex items-center justify-center transition-all text-slate-400 hover:text-slate-600 hover:bg-slate-50\"\n            >\n              <HelpCircle size={18} />\n            </button>\n          </Tooltip>\n        </div>\n      </div>\n    </TooltipProvider>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 2643, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,sKAAO,EAAC,IAAA,6IAAI,EAAC;AACtB"}},
    {"offset": {"line": 2658, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/ui/card.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Card({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card\"\n      className={cn(\n        'bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardHeader({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-header\"\n      className={cn(\n        '@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-2 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardTitle({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-title\"\n      className={cn('leading-none font-semibold', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardDescription({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-description\"\n      className={cn('text-muted-foreground text-sm', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardAction({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-action\"\n      className={cn(\n        'col-start-2 row-span-2 row-start-1 self-start justify-self-end',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction CardContent({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-content\"\n      className={cn('px-6', className)}\n      {...props}\n    />\n  )\n}\n\nfunction CardFooter({ className, ...props }: React.ComponentProps<'div'>) {\n  return (\n    <div\n      data-slot=\"card-footer\"\n      className={cn('flex items-center px-6 [.border-t]:pt-6', className)}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardAction,\n  CardDescription,\n  CardContent,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAEA;;;AAEA,SAAS,KAAK,EAAE,SAAS,EAAE,GAAG,OAAoC;IAChE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,qFACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,4JACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,UAAU,EAAE,SAAS,EAAE,GAAG,OAAoC;IACrE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,gBAAgB,EAAE,SAAS,EAAE,GAAG,OAAoC;IAC3E,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,kEACA;QAED,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,YAAY,EAAE,SAAS,EAAE,GAAG,OAAoC;IACvE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,QAAQ;QACrB,GAAG,KAAK;;;;;;AAGf;AAEA,SAAS,WAAW,EAAE,SAAS,EAAE,GAAG,OAAoC;IACtE,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,2CAA2C;QACxD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2760, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/ui/button.tsx"],"sourcesContent":["import * as React from 'react'\nimport { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\n\nimport { cn } from '@/lib/utils'\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive\",\n  {\n    variants: {\n      variant: {\n        default: 'bg-primary text-primary-foreground hover:bg-primary/90',\n        destructive:\n          'bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60',\n        outline:\n          'border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50',\n        secondary:\n          'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n        ghost:\n          'hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50',\n        link: 'text-primary underline-offset-4 hover:underline',\n      },\n      size: {\n        default: 'h-9 px-4 py-2 has-[>svg]:px-3',\n        sm: 'h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5',\n        lg: 'h-10 rounded-md px-6 has-[>svg]:px-4',\n        icon: 'size-9',\n        'icon-sm': 'size-8',\n        'icon-lg': 'size-10',\n      },\n    },\n    defaultVariants: {\n      variant: 'default',\n      size: 'default',\n    },\n  },\n)\n\nfunction Button({\n  className,\n  variant,\n  size,\n  asChild = false,\n  ...props\n}: React.ComponentProps<'button'> &\n  VariantProps<typeof buttonVariants> & {\n    asChild?: boolean\n  }) {\n  const Comp = asChild ? Slot : 'button'\n\n  return (\n    <Comp\n      data-slot=\"button\"\n      className={cn(buttonVariants({ variant, size, className }))}\n      {...props}\n    />\n  )\n}\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AACA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,uKAAG,EACxB,+bACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OACE;YACF,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;YACN,WAAW;YACX,WAAW;QACb;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AAGF,SAAS,OAAO,EACd,SAAS,EACT,OAAO,EACP,IAAI,EACJ,UAAU,KAAK,EACf,GAAG,OAIF;IACD,MAAM,OAAO,UAAU,wKAAI,GAAG;IAE9B,qBACE,8OAAC;QACC,aAAU;QACV,WAAW,IAAA,kHAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACvD,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2819, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/ui/input.tsx"],"sourcesContent":["import * as React from 'react'\n\nimport { cn } from '@/lib/utils'\n\nfunction Input({ className, type, ...props }: React.ComponentProps<'input'>) {\n  return (\n    <input\n      type={type}\n      data-slot=\"input\"\n      className={cn(\n        'file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input h-9 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n        'focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]',\n        'aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAEA;;;AAEA,SAAS,MAAM,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAsC;IACzE,qBACE,8OAAC;QACC,MAAM;QACN,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,8bACA,iFACA,0GACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2844, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/ui/label.tsx"],"sourcesContent":["'use client'\n\nimport * as React from 'react'\nimport * as LabelPrimitive from '@radix-ui/react-label'\n\nimport { cn } from '@/lib/utils'\n\nfunction Label({\n  className,\n  ...props\n}: React.ComponentProps<typeof LabelPrimitive.Root>) {\n  return (\n    <LabelPrimitive.Root\n      data-slot=\"label\"\n      className={cn(\n        'flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50',\n        className,\n      )}\n      {...props}\n    />\n  )\n}\n\nexport { Label }\n"],"names":[],"mappings":";;;;;AAGA;AAEA;AALA;;;;AAOA,SAAS,MAAM,EACb,SAAS,EACT,GAAG,OAC8C;IACjD,qBACE,8OAAC,yKAAmB;QAClB,aAAU;QACV,WAAW,IAAA,kHAAE,EACX,uNACA;QAED,GAAG,KAAK;;;;;;AAGf"}},
    {"offset": {"line": 2871, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/modals/modal-configuracion.tsx"],"sourcesContent":["\"use client\"\n\nimport { ArrowLeft, Check, LayoutGrid, Map } from \"lucide-react\"\nimport { Card, CardContent } from \"@/components/ui/card\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Label } from \"@/components/ui/label\"\n\ninterface ModalConfiguracionProps {\n  pasoModal: string\n  setPasoModal: (paso: string) => void\n  configSectorUnico: { nombre: string; color: string; precio: number }\n  setConfigSectorUnico: (config: { nombre: string; color: string; precio: number }) => void\n  onConfirmarSectorUnico: () => void\n  onIniciarMapaCompleto: () => void\n}\n\nexport function ModalConfiguracion({\n  pasoModal,\n  setPasoModal,\n  configSectorUnico,\n  setConfigSectorUnico,\n  onConfirmarSectorUnico,\n  onIniciarMapaCompleto,\n}: ModalConfiguracionProps) {\n  return (\n    <div className=\"fixed inset-0 bg-white flex items-center justify-center z-50 p-4\">\n      <div className=\"max-w-lg w-full\">\n        {pasoModal === \"seleccion\" && (\n          <div className=\"space-y-6\">\n            <div className=\"text-center mb-8\">\n              <h1 className=\"text-2xl font-semibold text-foreground\">Selecciona el tipo de mapa</h1>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              {/* Mapa Completo */}\n              <Card\n                className=\"cursor-pointer hover:border-primary hover:shadow-md transition-all group\"\n                onClick={onIniciarMapaCompleto}\n              >\n                <CardContent className=\"p-6 flex flex-col items-center text-center gap-4\">\n                  <div className=\"p-4 bg-primary/10 text-primary rounded-xl group-hover:bg-primary group-hover:text-primary-foreground transition-colors\">\n                    <Map size={32} />\n                  </div>\n                  <span className=\"font-medium text-foreground\">Mapa Completo</span>\n                </CardContent>\n              </Card>\n\n              {/* Mapa por Sector */}\n              <Card\n                className=\"cursor-pointer hover:border-primary hover:shadow-md transition-all group\"\n                onClick={() => setPasoModal(\"configurar_unico\")}\n              >\n                <CardContent className=\"p-6 flex flex-col items-center text-center gap-4\">\n                  <div className=\"p-4 bg-primary/10 text-primary rounded-xl group-hover:bg-primary group-hover:text-primary-foreground transition-colors\">\n                    <LayoutGrid size={32} />\n                  </div>\n                  <span className=\"font-medium text-foreground\">Mapa por Sector</span>\n                </CardContent>\n              </Card>\n            </div>\n          </div>\n        )}\n\n        {pasoModal === \"configurar_unico\" && (\n          <Card>\n            <CardContent className=\"p-6 space-y-6\">\n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={() => setPasoModal(\"seleccion\")}\n                  className=\"p-0 h-auto hover:bg-transparent\"\n                >\n                  <ArrowLeft size={18} className=\"text-muted-foreground\" />\n                </Button>\n                <h2 className=\"text-lg font-semibold text-foreground\">Configurar Sector</h2>\n              </div>\n\n              <div className=\"space-y-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"nombre\">Nombre del sector</Label>\n                  <Input\n                    id=\"nombre\"\n                    type=\"text\"\n                    value={configSectorUnico.nombre}\n                    onChange={(e) => setConfigSectorUnico({ ...configSectorUnico, nombre: e.target.value })}\n                    placeholder=\"Ej: VIP, General, Preferencia\"\n                  />\n                </div>\n\n                <div className=\"grid grid-cols-2 gap-4\">\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"color\">Color</Label>\n                    <div className=\"flex items-center gap-2 border rounded-md p-2 h-10\">\n                      <input\n                        id=\"color\"\n                        type=\"color\"\n                        value={configSectorUnico.color}\n                        onChange={(e) => setConfigSectorUnico({ ...configSectorUnico, color: e.target.value })}\n                        className=\"h-6 w-6 rounded cursor-pointer bg-transparent border-none\"\n                      />\n                      <span className=\"text-sm text-muted-foreground font-mono\">{configSectorUnico.color}</span>\n                    </div>\n                  </div>\n                  <div className=\"space-y-2\">\n                    <Label htmlFor=\"precio\">Precio (Bs.)</Label>\n                    <Input\n                      id=\"precio\"\n                      type=\"number\"\n                      value={configSectorUnico.precio}\n                      onChange={(e) =>\n                        setConfigSectorUnico({ ...configSectorUnico, precio: Number.parseInt(e.target.value) || 0 })\n                      }\n                    />\n                  </div>\n                </div>\n\n                <Button onClick={onConfirmarSectorUnico} className=\"w-full mt-4\">\n                  Comenzar <Check size={18} className=\"ml-2\" />\n                </Button>\n              </div>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AANA;;;;;;;AAiBO,SAAS,mBAAmB,EACjC,SAAS,EACT,YAAY,EACZ,iBAAiB,EACjB,oBAAoB,EACpB,sBAAsB,EACtB,qBAAqB,EACG;IACxB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;gBACZ,cAAc,6BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCACb,cAAA,8OAAC;gCAAG,WAAU;0CAAyC;;;;;;;;;;;sCAGzD,8OAAC;4BAAI,WAAU;;8CAEb,8OAAC,iIAAI;oCACH,WAAU;oCACV,SAAS;8CAET,cAAA,8OAAC,wIAAW;wCAAC,WAAU;;0DACrB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,uMAAG;oDAAC,MAAM;;;;;;;;;;;0DAEb,8OAAC;gDAAK,WAAU;0DAA8B;;;;;;;;;;;;;;;;;8CAKlD,8OAAC,iIAAI;oCACH,WAAU;oCACV,SAAS,IAAM,aAAa;8CAE5B,cAAA,8OAAC,wIAAW;wCAAC,WAAU;;0DACrB,8OAAC;gDAAI,WAAU;0DACb,cAAA,8OAAC,gOAAU;oDAAC,MAAM;;;;;;;;;;;0DAEpB,8OAAC;gDAAK,WAAU;0DAA8B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;gBAOvD,cAAc,oCACb,8OAAC,iIAAI;8BACH,cAAA,8OAAC,wIAAW;wBAAC,WAAU;;0CACrB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,qIAAM;wCACL,SAAQ;wCACR,MAAK;wCACL,SAAS,IAAM,aAAa;wCAC5B,WAAU;kDAEV,cAAA,8OAAC,6NAAS;4CAAC,MAAM;4CAAI,WAAU;;;;;;;;;;;kDAEjC,8OAAC;wCAAG,WAAU;kDAAwC;;;;;;;;;;;;0CAGxD,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,mIAAK;gDAAC,SAAQ;0DAAS;;;;;;0DACxB,8OAAC,mIAAK;gDACJ,IAAG;gDACH,MAAK;gDACL,OAAO,kBAAkB,MAAM;gDAC/B,UAAU,CAAC,IAAM,qBAAqB;wDAAE,GAAG,iBAAiB;wDAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;oDAAC;gDACrF,aAAY;;;;;;;;;;;;kDAIhB,8OAAC;wCAAI,WAAU;;0DACb,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,mIAAK;wDAAC,SAAQ;kEAAQ;;;;;;kEACvB,8OAAC;wDAAI,WAAU;;0EACb,8OAAC;gEACC,IAAG;gEACH,MAAK;gEACL,OAAO,kBAAkB,KAAK;gEAC9B,UAAU,CAAC,IAAM,qBAAqB;wEAAE,GAAG,iBAAiB;wEAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oEAAC;gEACpF,WAAU;;;;;;0EAEZ,8OAAC;gEAAK,WAAU;0EAA2C,kBAAkB,KAAK;;;;;;;;;;;;;;;;;;0DAGtF,8OAAC;gDAAI,WAAU;;kEACb,8OAAC,mIAAK;wDAAC,SAAQ;kEAAS;;;;;;kEACxB,8OAAC,mIAAK;wDACJ,IAAG;wDACH,MAAK;wDACL,OAAO,kBAAkB,MAAM;wDAC/B,UAAU,CAAC,IACT,qBAAqB;gEAAE,GAAG,iBAAiB;gEAAE,QAAQ,OAAO,QAAQ,CAAC,EAAE,MAAM,CAAC,KAAK,KAAK;4DAAE;;;;;;;;;;;;;;;;;;kDAMlG,8OAAC,qIAAM;wCAAC,SAAS;wCAAwB,WAAU;;4CAAc;0DACtD,8OAAC,6MAAK;gDAAC,MAAM;gDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAStD"}},
    {"offset": {"line": 3220, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/panels/panel-propiedades.tsx"],"sourcesContent":["\"use client\"\n\nimport type { Mesa, Sector } from \"@/types/mesa\"\nimport { TooltipProvider, Tooltip } from \"@/components/ui/tooltip-custom\"\nimport { Copy, Trash2, Lock, Unlock, ChevronUp, ChevronDown, ChevronLeft, ChevronRight, X } from \"lucide-react\"\n\nconst tieneMasDeUnaSillaPorLado = (mesa: Mesa): boolean => {\n  if (mesa.forma === \"circulo\") {\n    return mesa.sillas > 1\n  }\n\n  const lados = mesa.ladosActivos || [\"top\", \"bottom\", \"left\", \"right\"]\n  const ladosActivos = [\n    { id: \"top\", l: mesa.ancho },\n    { id: \"bottom\", l: mesa.ancho },\n    { id: \"right\", l: mesa.alto },\n    { id: \"left\", l: mesa.alto },\n  ].filter((k) => lados.includes(k.id))\n\n  if (ladosActivos.length === 0) return false\n\n  const pTotal = ladosActivos.reduce((a, b) => a + b.l, 0)\n  let asg = 0\n  const dist = ladosActivos.map((l) => {\n    const c = Math.floor((l.l / pTotal) * mesa.sillas)\n    const r = (l.l / pTotal) * mesa.sillas - c\n    asg += c\n    return { ...l, c, r }\n  })\n\n  dist.sort((a, b) => b.r - a.r)\n  for (let i = 0; i < mesa.sillas - asg; i++) if (dist[i]) dist[i].c++\n\n  // Retorna true si algún lado tiene más de 1 silla\n  return dist.some((d) => d.c > 1)\n}\n\ninterface PanelPropiedadesProps {\n  panelActivo: boolean\n  setPanelActivo: (v: boolean) => void\n  mesaActiva: Mesa | null\n  idsSeleccionados: string[]\n  sectores: Sector[]\n  tipoMapa: string\n  hayMesasBloqueadas: boolean\n  limitesSlider: { minW: number; minH: number }\n  onToggleBloqueo: () => void\n  onDuplicar: () => void\n  onEliminar: () => void\n  onEditarNombre: () => void\n  onActualizarMesa: (key: string, value: any) => void\n  onActualizarDiametro: (d: number) => void\n  onToggleLado: (lado: string) => void\n  onAgregarSector: () => void\n  onActualizarSector: (id: string, key: string, value: any) => void\n  onEliminarSector: (id: string) => void\n  onGuardarHistorial: () => void\n}\n\nexport function PanelPropiedades({\n  panelActivo,\n  setPanelActivo,\n  mesaActiva,\n  idsSeleccionados,\n  sectores,\n  tipoMapa,\n  hayMesasBloqueadas,\n  limitesSlider,\n  onToggleBloqueo,\n  onDuplicar,\n  onEliminar,\n  onEditarNombre,\n  onActualizarMesa,\n  onActualizarDiametro,\n  onToggleLado,\n  onAgregarSector,\n  onActualizarSector,\n  onEliminarSector,\n  onGuardarHistorial,\n}: PanelPropiedadesProps) {\n  if (!panelActivo || !mesaActiva) {\n    return null\n  }\n\n  const mostrarEspacioSillas = tieneMasDeUnaSillaPorLado(mesaActiva)\n\n  return (\n    <div className=\"w-72 bg-white border-l border-slate-200 flex flex-col h-full shadow-lg\">\n      {/* Header del panel */}\n      <div className=\"p-4 border-b border-slate-100\">\n        <div className=\"flex justify-between items-center mb-4\">\n          <div className=\"flex items-center gap-3\">\n            {hayMesasBloqueadas && (\n              <span className=\"w-5 h-5 rounded bg-amber-100 flex items-center justify-center\">\n                <Lock size={10} className=\"text-amber-600\" />\n              </span>\n            )}\n            <div>\n              <h2 className=\"font-semibold text-slate-800 text-sm\">\n                {idsSeleccionados.length > 1 ? `${idsSeleccionados.length} mesas` : mesaActiva.etiqueta}\n              </h2>\n              <span className=\"text-xs text-slate-400\">\n                {idsSeleccionados.length > 1 ? \"Edición múltiple\" : `ID: ${mesaActiva.id}`}\n              </span>\n            </div>\n          </div>\n          <button\n            onClick={() => setPanelActivo(false)}\n            className=\"p-1.5 rounded-lg hover:bg-slate-100 text-slate-400 hover:text-slate-600 transition-colors\"\n          >\n            <X size={16} />\n          </button>\n        </div>\n\n        {/* Acciones rápidas */}\n        <div className=\"flex gap-2\">\n          <TooltipProvider>\n            <Tooltip label={hayMesasBloqueadas ? \"Desbloquear\" : \"Bloquear\"} shortcut=\"Ctrl+L\" position=\"bottom\">\n              <button\n                onClick={onToggleBloqueo}\n                className={`p-2.5 rounded-lg transition-colors ${hayMesasBloqueadas\n                    ? \"bg-amber-500 text-white hover:bg-amber-600\"\n                    : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n                  }`}\n              >\n                {hayMesasBloqueadas ? <Unlock size={16} /> : <Lock size={16} />}\n              </button>\n            </Tooltip>\n\n            <Tooltip label=\"Duplicar\" shortcut=\"Ctrl+D\" position=\"bottom\">\n              <button\n                onClick={onDuplicar}\n                disabled={hayMesasBloqueadas}\n                className={`p-2.5 rounded-lg transition-colors ${hayMesasBloqueadas\n                    ? \"bg-slate-50 text-slate-300 cursor-not-allowed\"\n                    : \"bg-slate-100 text-slate-600 hover:bg-indigo-100 hover:text-indigo-600\"\n                  }`}\n              >\n                <Copy size={16} />\n              </button>\n            </Tooltip>\n\n            <Tooltip label=\"Eliminar\" shortcut=\"Supr\" position=\"bottom\">\n              <button\n                onClick={onEliminar}\n                disabled={hayMesasBloqueadas}\n                className={`p-2.5 rounded-lg transition-colors ${hayMesasBloqueadas\n                    ? \"bg-slate-50 text-slate-300 cursor-not-allowed\"\n                    : \"bg-slate-100 text-slate-600 hover:bg-red-100 hover:text-red-600\"\n                  }`}\n              >\n                <Trash2 size={16} />\n              </button>\n            </Tooltip>\n          </TooltipProvider>\n        </div>\n      </div>\n\n      {/* Contenido scrolleable */}\n      <div className=\"p-4 space-y-4 flex-1 overflow-y-auto\">\n        {/* Nombre (solo si es 1 mesa) */}\n        {idsSeleccionados.length === 1 && (\n          <div className=\"space-y-1.5\">\n            <label className=\"text-xs font-medium text-slate-500\">Nombre</label>\n            <input\n              type=\"text\"\n              value={mesaActiva.etiqueta}\n              onChange={(e) => onActualizarMesa(\"etiqueta\", e.target.value)}\n              className=\"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 outline-none\"\n              disabled={mesaActiva.bloqueada}\n            />\n          </div>\n        )}\n\n        {/* Selector de Sector */}\n        {tipoMapa === \"completo\" && (\n          <div className=\"space-y-1.5\">\n            <label className=\"text-xs font-medium text-slate-500\">Sector</label>\n            <select\n              value={mesaActiva.sectorId}\n              onChange={(e) => onActualizarMesa(\"sectorId\", e.target.value)}\n              className=\"w-full border border-slate-200 rounded-lg px-3 py-2 text-sm bg-white focus:border-indigo-400 focus:ring-2 focus:ring-indigo-100 outline-none\"\n              disabled={hayMesasBloqueadas}\n            >\n              {sectores.map((s) => (\n                <option key={s.id} value={s.id}>\n                  {s.nombre}\n                </option>\n              ))}\n            </select>\n          </div>\n        )}\n\n        {/* Forma */}\n        <div className=\"space-y-1.5\">\n          <label className=\"text-xs font-medium text-slate-500\">Forma</label>\n          <div className=\"grid grid-cols-2 gap-2\">\n            <button\n              onClick={() => {\n                onGuardarHistorial()\n                onActualizarMesa(\"forma\", \"circulo\")\n              }}\n              className={`py-2 rounded-lg text-sm font-medium transition-colors ${mesaActiva.forma === \"circulo\"\n                  ? \"bg-indigo-600 text-white\"\n                  : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n                }`}\n              disabled={hayMesasBloqueadas}\n            >\n              Redonda\n            </button>\n            <button\n              onClick={() => {\n                onGuardarHistorial()\n                onActualizarMesa(\"forma\", \"cuadrado\")\n              }}\n              className={`py-2 rounded-lg text-sm font-medium transition-colors ${mesaActiva.forma === \"cuadrado\"\n                  ? \"bg-indigo-600 text-white\"\n                  : \"bg-slate-100 text-slate-600 hover:bg-slate-200\"\n                }`}\n              disabled={hayMesasBloqueadas}\n            >\n              Cuadrada\n            </button>\n          </div>\n        </div>\n\n        {/* Escala */}\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between items-center\">\n            <label className=\"text-xs font-medium text-slate-500\">Escala</label>\n            <span className=\"text-xs font-medium text-indigo-600\">{Math.round((mesaActiva.escala || 1) * 100)}%</span>\n          </div>\n          <input\n            type=\"range\"\n            min=\"50\"\n            max=\"200\"\n            value={(mesaActiva.escala || 1) * 100}\n            onChange={(e) => onActualizarMesa(\"escala\", Number.parseInt(e.target.value) / 100)}\n            className=\"w-full accent-indigo-600 h-1.5 bg-slate-200 rounded-full appearance-none cursor-pointer\"\n            disabled={hayMesasBloqueadas}\n          />\n        </div>\n\n        {/* Lados con sillas (solo cuadrado) */}\n        {mesaActiva.forma === \"cuadrado\" && (\n          <div className=\"space-y-2\">\n            <label className=\"text-xs font-medium text-slate-500\">Lados con sillas</label>\n            <div className=\"bg-slate-50 p-4 rounded-xl flex flex-col items-center gap-2\">\n              <button\n                onClick={() => onToggleLado(\"top\")}\n                className={`w-10 h-6 rounded-md transition-colors ${mesaActiva.ladosActivos?.includes(\"top\")\n                    ? \"bg-indigo-500 text-white\"\n                    : \"bg-white border border-slate-200 text-slate-400 hover:bg-slate-100\"\n                  }`}\n              >\n                <ChevronUp size={14} className=\"mx-auto\" />\n              </button>\n              <div className=\"flex gap-2 items-center\">\n                <button\n                  onClick={() => onToggleLado(\"left\")}\n                  className={`w-6 h-10 rounded-md transition-colors ${mesaActiva.ladosActivos?.includes(\"left\")\n                      ? \"bg-indigo-500 text-white\"\n                      : \"bg-white border border-slate-200 text-slate-400 hover:bg-slate-100\"\n                    }`}\n                >\n                  <ChevronLeft size={14} className=\"mx-auto\" />\n                </button>\n                <div className=\"w-12 h-10 border-2 border-slate-300 rounded-lg bg-white\" />\n                <button\n                  onClick={() => onToggleLado(\"right\")}\n                  className={`w-6 h-10 rounded-md transition-colors ${mesaActiva.ladosActivos?.includes(\"right\")\n                      ? \"bg-indigo-500 text-white\"\n                      : \"bg-white border border-slate-200 text-slate-400 hover:bg-slate-100\"\n                    }`}\n                >\n                  <ChevronRight size={14} className=\"mx-auto\" />\n                </button>\n              </div>\n              <button\n                onClick={() => onToggleLado(\"bottom\")}\n                className={`w-10 h-6 rounded-md transition-colors ${mesaActiva.ladosActivos?.includes(\"bottom\")\n                    ? \"bg-indigo-500 text-white\"\n                    : \"bg-white border border-slate-200 text-slate-400 hover:bg-slate-100\"\n                  }`}\n              >\n                <ChevronDown size={14} className=\"mx-auto\" />\n              </button>\n            </div>\n          </div>\n        )}\n\n        {/* Sillas */}\n        <div className=\"space-y-2\">\n          <div className=\"flex justify-between items-center\">\n            <label className=\"text-xs font-medium text-slate-500\">Sillas</label>\n            <span className=\"text-xs font-medium text-slate-600\">{mesaActiva.sillas}</span>\n          </div>\n          <input\n            type=\"range\"\n            min=\"1\"\n            max=\"30\"\n            value={mesaActiva.sillas}\n            onChange={(e) => onActualizarMesa(\"sillas\", Number.parseInt(e.target.value))}\n            className=\"w-full accent-indigo-600 h-1.5 bg-slate-200 rounded-full appearance-none cursor-pointer\"\n            disabled={hayMesasBloqueadas}\n          />\n        </div>\n\n        {mostrarEspacioSillas && (\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between items-center\">\n              <label className=\"text-xs font-medium text-slate-500\">Espacio entre sillas</label>\n              <span className=\"text-xs font-medium text-slate-600\">{mesaActiva.espacioEntreSillas ?? 50}%</span>\n            </div>\n            <input\n              type=\"range\"\n              min=\"0\"\n              max=\"100\"\n              value={mesaActiva.espacioEntreSillas ?? 50}\n              onChange={(e) => onActualizarMesa(\"espacioEntreSillas\", Number.parseInt(e.target.value))}\n              className=\"w-full accent-indigo-600 h-1.5 bg-slate-200 rounded-full appearance-none cursor-pointer\"\n              disabled={hayMesasBloqueadas}\n            />\n            <div className=\"flex justify-between text-[10px] text-slate-400\">\n              <span>Juntas</span>\n              <span>Separadas</span>\n            </div>\n          </div>\n        )}\n\n        {/* Dimensiones */}\n        {mesaActiva.forma === \"circulo\" ? (\n          <div className=\"space-y-2\">\n            <div className=\"flex justify-between items-center\">\n              <label className=\"text-xs font-medium text-slate-500\">Diámetro</label>\n              <span className=\"text-xs text-slate-400\">{mesaActiva.ancho}px</span>\n            </div>\n            <input\n              type=\"range\"\n              min={limitesSlider.minW}\n              max=\"400\"\n              value={mesaActiva.ancho}\n              onChange={(e) => onActualizarDiametro(Number.parseInt(e.target.value))}\n              className=\"w-full accent-indigo-600 h-1.5 bg-slate-200 rounded-full appearance-none cursor-pointer\"\n              disabled={hayMesasBloqueadas}\n            />\n          </div>\n        ) : (\n          <>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center\">\n                <label className=\"text-xs font-medium text-slate-500\">Ancho</label>\n                <span className=\"text-xs text-slate-400\">{mesaActiva.ancho}px</span>\n              </div>\n              <input\n                type=\"range\"\n                min={limitesSlider.minW}\n                max=\"400\"\n                value={mesaActiva.ancho}\n                onChange={(e) => onActualizarMesa(\"ancho\", Number.parseInt(e.target.value))}\n                className=\"w-full accent-indigo-600 h-1.5 bg-slate-200 rounded-full appearance-none cursor-pointer\"\n                disabled={hayMesasBloqueadas}\n              />\n            </div>\n            <div className=\"space-y-2\">\n              <div className=\"flex justify-between items-center\">\n                <label className=\"text-xs font-medium text-slate-500\">Alto</label>\n                <span className=\"text-xs text-slate-400\">{mesaActiva.alto}px</span>\n              </div>\n              <input\n                type=\"range\"\n                min={limitesSlider.minH}\n                max=\"400\"\n                value={mesaActiva.alto}\n                onChange={(e) => onActualizarMesa(\"alto\", Number.parseInt(e.target.value))}\n                className=\"w-full accent-indigo-600 h-1.5 bg-slate-200 rounded-full appearance-none cursor-pointer\"\n                disabled={hayMesasBloqueadas}\n              />\n            </div>\n          </>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4033, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/modals/modal-confirmacion.tsx"],"sourcesContent":["\"use client\"\n\ninterface ModalConfirmacionProps {\n  mensaje: string\n  onConfirm: () => void\n  onCancel: () => void\n}\n\nexport function ModalConfirmacion({ mensaje, onConfirm, onCancel }: ModalConfirmacionProps) {\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[200]\">\n      <div className=\"bg-[#2a2a2a] rounded-lg p-6 w-96 border border-[#444]\">\n        <p className=\"text-white mb-6\">{mensaje}</p>\n        <div className=\"flex gap-2 justify-end\">\n          <button onClick={onCancel} className=\"px-4 py-2 text-gray-400 hover:text-white transition-colors\">\n            Cancelar\n          </button>\n          <button\n            onClick={onConfirm}\n            className=\"px-4 py-2 bg-red-500 hover:bg-red-600 text-white rounded transition-colors\"\n          >\n            Eliminar\n          </button>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAAA;;AAQO,SAAS,kBAAkB,EAAE,OAAO,EAAE,SAAS,EAAE,QAAQ,EAA0B;IACxF,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAE,WAAU;8BAAmB;;;;;;8BAChC,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAO,SAAS;4BAAU,WAAU;sCAA6D;;;;;;sCAGlG,8OAAC;4BACC,SAAS;4BACT,WAAU;sCACX;;;;;;;;;;;;;;;;;;;;;;;AAOX"}},
    {"offset": {"line": 4097, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/modals/modal-nombre-mesa.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport { useState, useEffect } from \"react\"\nimport type { Mesa } from \"@/types/mesa\"\n\ninterface ModalNombreMesaProps {\n  mesa: Mesa | null\n  onClose: () => void\n  onSave: (id: string, nombre: string) => void\n}\n\nexport function ModalNombreMesa({ mesa, onClose, onSave }: ModalNombreMesaProps) {\n  const [nombre, setNombre] = useState(\"\")\n\n  useEffect(() => {\n    if (mesa) {\n      setNombre(mesa.nombre)\n    }\n  }, [mesa])\n\n  if (!mesa) return null\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault()\n    onSave(mesa.id, nombre)\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-[200]\">\n      <div className=\"bg-[#2a2a2a] rounded-lg p-6 w-80 border border-[#444]\">\n        <h3 className=\"text-lg font-semibold text-white mb-4\">Editar nombre de mesa</h3>\n        <form onSubmit={handleSubmit}>\n          <input\n            type=\"text\"\n            value={nombre}\n            onChange={(e) => setNombre(e.target.value)}\n            className=\"w-full bg-[#1a1a1a] border border-[#555] rounded px-3 py-2 text-white mb-4 focus:outline-none focus:border-orange-500\"\n            autoFocus\n          />\n          <div className=\"flex gap-2 justify-end\">\n            <button\n              type=\"button\"\n              onClick={onClose}\n              className=\"px-4 py-2 text-gray-400 hover:text-white transition-colors\"\n            >\n              Cancelar\n            </button>\n            <button\n              type=\"submit\"\n              className=\"px-4 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded transition-colors\"\n            >\n              Guardar\n            </button>\n          </div>\n        </form>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AAJA;;;AAaO,SAAS,gBAAgB,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAwB;IAC7E,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,iNAAQ,EAAC;IAErC,IAAA,kNAAS,EAAC;QACR,IAAI,MAAM;YACR,UAAU,KAAK,MAAM;QACvB;IACF,GAAG;QAAC;KAAK;IAET,IAAI,CAAC,MAAM,OAAO;IAElB,MAAM,eAAe,CAAC;QACpB,EAAE,cAAc;QAChB,OAAO,KAAK,EAAE,EAAE;IAClB;IAEA,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAwC;;;;;;8BACtD,8OAAC;oBAAK,UAAU;;sCACd,8OAAC;4BACC,MAAK;4BACL,OAAO;4BACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;4BACzC,WAAU;4BACV,SAAS;;;;;;sCAEX,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb"}},
    {"offset": {"line": 4197, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/modals/modal-ayuda.tsx"],"sourcesContent":["\"use client\"\n\nimport { HelpCircle, X } from \"lucide-react\"\nimport { formatShortcut } from \"@/components/ui/tooltip-custom\"\n\ninterface ModalAyudaProps {\n  isMac: boolean\n  onClose: () => void\n}\n\nexport function ModalAyuda({ isMac, onClose }: ModalAyudaProps) {\n  const atajos = {\n    navegacion: [\n      { label: \"Zoom to Fit\", shortcut: \"Ctrl + 1\" },\n      { label: \"Zoom to Selection\", shortcut: \"Ctrl + 2\" },\n      { label: \"Centrar vista\", shortcut: \"Ctrl + 0\" },\n      { label: \"Paneo temporal\", shortcut: \"Espacio\" },\n    ],\n    herramientas: [\n      { label: \"Modo Selección\", shortcut: \"V\" },\n      { label: \"Modo Mano\", shortcut: \"H\" },\n    ],\n    edicion: [\n      { label: \"Deshacer\", shortcut: \"Ctrl + Z\" },\n      { label: \"Rehacer\", shortcut: \"Ctrl + Y\" },\n      { label: \"Copiar\", shortcut: \"Ctrl + C\" },\n      { label: \"Pegar\", shortcut: \"Ctrl + V\" },\n      { label: \"Duplicar\", shortcut: \"Ctrl + D\" },\n      { label: \"Seleccionar todo\", shortcut: \"Ctrl + A\" },\n      { label: \"Eliminar\", shortcut: \"Delete\" },\n      { label: \"Bloquear/Desbloquear\", shortcut: \"Ctrl + L\" },\n    ],\n    movimiento: [\n      { label: \"Mover 1px\", shortcut: \"Flechas\" },\n      { label: \"Mover 10px\", shortcut: \"Shift + Flechas\" },\n      { label: \"Duplicar arrastrando\", shortcut: \"Alt + Arrastrar\" },\n    ],\n  }\n\n  return (\n    <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50 animate-in fade-in duration-200\">\n      <div className=\"bg-white rounded-2xl shadow-2xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden animate-in zoom-in-95 duration-200\">\n        <div className=\"p-5 border-b border-slate-200 flex justify-between items-center\">\n          <h2 className=\"font-bold text-lg text-slate-800 flex items-center gap-2\">\n            <HelpCircle size={20} className=\"text-indigo-600\" />\n            Atajos de Teclado\n            <span className=\"text-xs font-normal text-slate-400 ml-2\">({isMac ? \"macOS\" : \"Windows/Linux\"})</span>\n          </h2>\n          <button onClick={onClose} className=\"p-1 hover:bg-slate-100 rounded-lg text-slate-400 hover:text-slate-600\">\n            <X size={20} />\n          </button>\n        </div>\n        <div className=\"p-5 overflow-y-auto max-h-[60vh]\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            <div>\n              <h3 className=\"text-xs font-bold text-slate-500 uppercase mb-3\">Navegación</h3>\n              <div className=\"space-y-2\">\n                {atajos.navegacion.map((a) => (\n                  <div key={a.label} className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-600\">{a.label}</span>\n                    <kbd className=\"px-2 py-0.5 bg-slate-100 rounded text-xs font-mono\">\n                      {formatShortcut(a.shortcut, isMac)}\n                    </kbd>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div>\n              <h3 className=\"text-xs font-bold text-slate-500 uppercase mb-3\">Herramientas</h3>\n              <div className=\"space-y-2\">\n                {atajos.herramientas.map((a) => (\n                  <div key={a.label} className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-600\">{a.label}</span>\n                    <kbd className=\"px-2 py-0.5 bg-slate-100 rounded text-xs font-mono\">\n                      {formatShortcut(a.shortcut, isMac)}\n                    </kbd>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div>\n              <h3 className=\"text-xs font-bold text-slate-500 uppercase mb-3\">Edición</h3>\n              <div className=\"space-y-2\">\n                {atajos.edicion.map((a) => (\n                  <div key={a.label} className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-600\">{a.label}</span>\n                    <kbd className=\"px-2 py-0.5 bg-slate-100 rounded text-xs font-mono\">\n                      {formatShortcut(a.shortcut, isMac)}\n                    </kbd>\n                  </div>\n                ))}\n              </div>\n            </div>\n            <div>\n              <h3 className=\"text-xs font-bold text-slate-500 uppercase mb-3\">Movimiento</h3>\n              <div className=\"space-y-2\">\n                {atajos.movimiento.map((a) => (\n                  <div key={a.label} className=\"flex justify-between text-sm\">\n                    <span className=\"text-slate-600\">{a.label}</span>\n                    <kbd className=\"px-2 py-0.5 bg-slate-100 rounded text-xs font-mono\">\n                      {formatShortcut(a.shortcut, isMac)}\n                    </kbd>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n        <div className=\"p-4 border-t border-slate-100 bg-slate-50 text-center\">\n          <p className=\"text-xs text-slate-400\">\n            Presiona <kbd className=\"px-1.5 py-0.5 bg-white rounded border text-[10px]\">?</kbd> para abrir/cerrar esta\n            ayuda\n          </p>\n        </div>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 4597, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/header/editor-header.tsx"],"sourcesContent":["\"use client\"\n\nimport { Undo, Redo, MousePointer2, Hand } from \"lucide-react\"\nimport { Tooltip, TooltipProvider } from \"@/components/ui/tooltip-custom\"\n\ninterface EditorHeaderProps {\n  tipoMapa: string\n  sectorNombre?: string\n  sectorPrecio?: number\n  isMac: boolean\n  puedeDeshacer: boolean\n  puedeRehacer: boolean\n  onDeshacer: () => void\n  onRehacer: () => void\n  cantidadSeleccionadas: number\n  herramientaActiva: string\n}\n\nexport function EditorHeader({\n  tipoMapa,\n  sectorNombre,\n  sectorPrecio,\n  isMac,\n  puedeDeshacer,\n  puedeRehacer,\n  onDeshacer,\n  onRehacer,\n  cantidadSeleccionadas,\n  herramientaActiva,\n}: EditorHeaderProps) {\n  return (\n    <TooltipProvider>\n      <div className=\"h-14 bg-white border-b border-slate-200 flex items-center px-6 justify-between shrink-0 z-20 shadow-sm\">\n        <div className=\"flex items-center gap-4\">\n          <h1 className=\"font-bold text-lg text-slate-700 flex items-center gap-2\">\n            {tipoMapa === \"completo\" ? \"Mapa Multisector\" : `Sector: ${sectorNombre}`}\n            {tipoMapa === \"sector\" && (\n              <span className=\"text-xs bg-emerald-100 text-emerald-700 px-2 py-0.5 rounded-full border border-emerald-200\">\n                Bs. {sectorPrecio}\n              </span>\n            )}\n          </h1>\n\n          <div className=\"flex items-center gap-1 bg-slate-100 rounded-lg p-1\">\n            <Tooltip label=\"Deshacer\" shortcut=\"Ctrl + Z\" isMac={isMac} position=\"bottom\">\n              <button\n                onClick={onDeshacer}\n                disabled={!puedeDeshacer}\n                className={`p-1.5 rounded transition-colors ${\n                  !puedeDeshacer\n                    ? \"text-slate-300\"\n                    : \"text-slate-600 hover:bg-white hover:text-indigo-600 hover:shadow-sm\"\n                }`}\n              >\n                <Undo size={16} />\n              </button>\n            </Tooltip>\n            <Tooltip label=\"Rehacer\" shortcut=\"Ctrl + Y\" isMac={isMac} position=\"bottom\">\n              <button\n                onClick={onRehacer}\n                disabled={!puedeRehacer}\n                className={`p-1.5 rounded transition-colors ${\n                  !puedeRehacer\n                    ? \"text-slate-300\"\n                    : \"text-slate-600 hover:bg-white hover:text-indigo-600 hover:shadow-sm\"\n                }`}\n              >\n                <Redo size={16} />\n              </button>\n            </Tooltip>\n          </div>\n        </div>\n\n        <div className=\"flex items-center gap-4\">\n          {cantidadSeleccionadas > 0 && (\n            <span className=\"text-xs font-bold bg-indigo-100 text-indigo-600 px-2 py-1 rounded-full\">\n              {cantidadSeleccionadas} seleccionada(s)\n            </span>\n          )}\n          <div className=\"text-sm text-slate-400 flex items-center gap-2\">\n            {herramientaActiva === \"mano\" ? <Hand size={14} /> : <MousePointer2 size={14} />}\n            {herramientaActiva === \"mano\" ? \"Modo Paneo\" : \"Modo Edición\"}\n          </div>\n        </div>\n      </div>\n    </TooltipProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AACA;AAHA;;;;AAkBO,SAAS,aAAa,EAC3B,QAAQ,EACR,YAAY,EACZ,YAAY,EACZ,KAAK,EACL,aAAa,EACb,YAAY,EACZ,UAAU,EACV,SAAS,EACT,qBAAqB,EACrB,iBAAiB,EACC;IAClB,qBACE,8OAAC,yJAAe;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAG,WAAU;;gCACX,aAAa,aAAa,qBAAqB,CAAC,QAAQ,EAAE,cAAc;gCACxE,aAAa,0BACZ,8OAAC;oCAAK,WAAU;;wCAA6F;wCACtG;;;;;;;;;;;;;sCAKX,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,iJAAO;oCAAC,OAAM;oCAAW,UAAS;oCAAW,OAAO;oCAAO,UAAS;8CACnE,cAAA,8OAAC;wCACC,SAAS;wCACT,UAAU,CAAC;wCACX,WAAW,CAAC,gCAAgC,EAC1C,CAAC,gBACG,mBACA,uEACJ;kDAEF,cAAA,8OAAC,0MAAI;4CAAC,MAAM;;;;;;;;;;;;;;;;8CAGhB,8OAAC,iJAAO;oCAAC,OAAM;oCAAU,UAAS;oCAAW,OAAO;oCAAO,UAAS;8CAClE,cAAA,8OAAC;wCACC,SAAS;wCACT,UAAU,CAAC;wCACX,WAAW,CAAC,gCAAgC,EAC1C,CAAC,eACG,mBACA,uEACJ;kDAEF,cAAA,8OAAC,0MAAI;4CAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;;8BAMpB,8OAAC;oBAAI,WAAU;;wBACZ,wBAAwB,mBACvB,8OAAC;4BAAK,WAAU;;gCACb;gCAAsB;;;;;;;sCAG3B,8OAAC;4BAAI,WAAU;;gCACZ,sBAAsB,uBAAS,8OAAC,0MAAI;oCAAC,MAAM;;;;;yDAAS,8OAAC,6OAAa;oCAAC,MAAM;;;;;;gCACzE,sBAAsB,SAAS,eAAe;;;;;;;;;;;;;;;;;;;;;;;;AAM3D"}},
    {"offset": {"line": 4766, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/canvas/mesa-svg.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport type { Mesa, Sector } from \"@/types/mesa\"\nimport { obtenerPosicionesSillas } from \"@/utils/mesa-utils\"\nimport { TAMANO_SILLA } from \"@/constants/canvas\"\nimport { Lock } from \"lucide-react\"\n\ninterface MesaSvgProps {\n  mesa: Mesa\n  sectores: Sector[]\n  isSelected: boolean\n  onMouseDown: (e: React.MouseEvent, mesa: Mesa) => void\n  onDoubleClick: (mesa: Mesa) => void\n  onTouchStart?: (e: React.TouchEvent, mesa: Mesa) => void\n}\n\nexport function MesaSvg({ mesa, sectores, isSelected, onMouseDown, onDoubleClick, onTouchStart }: MesaSvgProps) {\n  const sectorMesa = sectores.find((s) => s.id === mesa.sectorId) || sectores[0]\n  const stroke = isSelected ? \"#6366f1\" : sectorMesa.color\n\n  // Mesa local para calcular posiciones de sillas relativas al centro\n  const mesaLocal: Mesa = { ...mesa, x: 0, y: 0 }\n  const pos = obtenerPosicionesSillas(mesaLocal)\n\n  const radioCirculo = Math.max(mesa.ancho, mesa.alto) / 2\n\n  return (\n    <g\n      transform={`translate(${mesa.x},${mesa.y}) scale(${mesa.escala || 1})`}\n      onMouseDown={(e) => onMouseDown(e, mesa)}\n      onDoubleClick={() => onDoubleClick(mesa)}\n      onTouchStart={(e) => onTouchStart?.(e, mesa)}\n      style={{ cursor: mesa.bloqueada ? \"not-allowed\" : \"move\" }}\n    >\n      {/* Sillas - Ahora cada silla tiene rotación individual */}\n      {pos.map((p, i) => (\n        <g key={i} transform={`translate(${p.x}, ${p.y}) rotate(${p.angulo})`}>\n          <rect\n            x={-TAMANO_SILLA / 2}\n            y={-TAMANO_SILLA / 2}\n            width={TAMANO_SILLA}\n            height={TAMANO_SILLA}\n            rx={4}\n            fill=\"#e2e8f0\"\n            stroke=\"white\"\n            strokeWidth=\"2\"\n            filter=\"url(#chair-shadow)\"\n            opacity={mesa.bloqueada ? 0.5 : 1}\n          />\n        </g>\n      ))}\n\n      {/* Mesa */}\n      {mesa.forma === \"circulo\" ? (\n        <circle\n          cx={0}\n          cy={0}\n          r={radioCirculo}\n          fill=\"#FFFFFF\"\n          stroke={stroke}\n          strokeWidth={isSelected ? 3 : 2}\n          strokeDasharray={mesa.bloqueada ? \"8,4\" : \"none\"}\n        />\n      ) : (\n        <rect\n          x={-mesa.ancho / 2}\n          y={-mesa.alto / 2}\n          width={mesa.ancho}\n          height={mesa.alto}\n          rx={8}\n          fill=\"#FFFFFF\"\n          stroke={stroke}\n          strokeWidth={isSelected ? 3 : 2}\n          strokeDasharray={mesa.bloqueada ? \"8,4\" : \"none\"}\n        />\n      )}\n\n      {/* Etiqueta */}\n      <text\n        x={0}\n        y={0}\n        dy=\"5\"\n        textAnchor=\"middle\"\n        className=\"text-xs font-bold pointer-events-none select-none\"\n        style={{ fill: stroke }}\n      >\n        {mesa.etiqueta}\n      </text>\n\n      {/* Icono de bloqueo */}\n      {mesa.bloqueada && (\n        <g transform={`translate(${mesa.ancho / 2 - 10}, ${-mesa.alto / 2 + 10})`}>\n          <circle cx={0} cy={0} r={10} fill=\"white\" stroke={stroke} strokeWidth={1} />\n          <Lock x={-6} y={-6} size={12} style={{ fill: \"none\", stroke: \"#64748b\" }} />\n        </g>\n      )}\n    </g>\n  )\n}\n"],"names":[],"mappings":";;;;;AAKA;AACA;AACA;AAPA;;;;;AAkBO,SAAS,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAE,WAAW,EAAE,aAAa,EAAE,YAAY,EAAgB;IAC5G,MAAM,aAAa,SAAS,IAAI,CAAC,CAAC,IAAM,EAAE,EAAE,KAAK,KAAK,QAAQ,KAAK,QAAQ,CAAC,EAAE;IAC9E,MAAM,SAAS,aAAa,YAAY,WAAW,KAAK;IAExD,oEAAoE;IACpE,MAAM,YAAkB;QAAE,GAAG,IAAI;QAAE,GAAG;QAAG,GAAG;IAAE;IAC9C,MAAM,MAAM,IAAA,iJAAuB,EAAC;IAEpC,MAAM,eAAe,KAAK,GAAG,CAAC,KAAK,KAAK,EAAE,KAAK,IAAI,IAAI;IAEvD,qBACE,8OAAC;QACC,WAAW,CAAC,UAAU,EAAE,KAAK,CAAC,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC,QAAQ,EAAE,KAAK,MAAM,IAAI,EAAE,CAAC,CAAC;QACtE,aAAa,CAAC,IAAM,YAAY,GAAG;QACnC,eAAe,IAAM,cAAc;QACnC,cAAc,CAAC,IAAM,eAAe,GAAG;QACvC,OAAO;YAAE,QAAQ,KAAK,SAAS,GAAG,gBAAgB;QAAO;;YAGxD,IAAI,GAAG,CAAC,CAAC,GAAG,kBACX,8OAAC;oBAAU,WAAW,CAAC,UAAU,EAAE,EAAE,CAAC,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC,SAAS,EAAE,EAAE,MAAM,CAAC,CAAC,CAAC;8BACnE,cAAA,8OAAC;wBACC,GAAG,CAAC,mIAAY,GAAG;wBACnB,GAAG,CAAC,mIAAY,GAAG;wBACnB,OAAO,mIAAY;wBACnB,QAAQ,mIAAY;wBACpB,IAAI;wBACJ,MAAK;wBACL,QAAO;wBACP,aAAY;wBACZ,QAAO;wBACP,SAAS,KAAK,SAAS,GAAG,MAAM;;;;;;mBAX5B;;;;;YAiBT,KAAK,KAAK,KAAK,0BACd,8OAAC;gBACC,IAAI;gBACJ,IAAI;gBACJ,GAAG;gBACH,MAAK;gBACL,QAAQ;gBACR,aAAa,aAAa,IAAI;gBAC9B,iBAAiB,KAAK,SAAS,GAAG,QAAQ;;;;;qCAG5C,8OAAC;gBACC,GAAG,CAAC,KAAK,KAAK,GAAG;gBACjB,GAAG,CAAC,KAAK,IAAI,GAAG;gBAChB,OAAO,KAAK,KAAK;gBACjB,QAAQ,KAAK,IAAI;gBACjB,IAAI;gBACJ,MAAK;gBACL,QAAQ;gBACR,aAAa,aAAa,IAAI;gBAC9B,iBAAiB,KAAK,SAAS,GAAG,QAAQ;;;;;;0BAK9C,8OAAC;gBACC,GAAG;gBACH,GAAG;gBACH,IAAG;gBACH,YAAW;gBACX,WAAU;gBACV,OAAO;oBAAE,MAAM;gBAAO;0BAErB,KAAK,QAAQ;;;;;;YAIf,KAAK,SAAS,kBACb,8OAAC;gBAAE,WAAW,CAAC,UAAU,EAAE,KAAK,KAAK,GAAG,IAAI,GAAG,EAAE,EAAE,CAAC,KAAK,IAAI,GAAG,IAAI,GAAG,CAAC,CAAC;;kCACvE,8OAAC;wBAAO,IAAI;wBAAG,IAAI;wBAAG,GAAG;wBAAI,MAAK;wBAAQ,QAAQ;wBAAQ,aAAa;;;;;;kCACvE,8OAAC,0MAAI;wBAAC,GAAG,CAAC;wBAAG,GAAG,CAAC;wBAAG,MAAM;wBAAI,OAAO;4BAAE,MAAM;4BAAQ,QAAQ;wBAAU;;;;;;;;;;;;;;;;;;AAKjF"}},
    {"offset": {"line": 4909, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/canvas/canvas-area.tsx"],"sourcesContent":["\"use client\"\n\nimport type React from \"react\"\n\nimport type { Mesa, Sector, CajaSeleccion, Guia, EditandoNombre } from \"@/types/mesa\"\nimport { MesaSvg } from \"@/components/canvas/mesa-svg\"\n\ninterface CanvasAreaProps {\n  referenciaSvg: React.RefObject<SVGSVGElement>\n  contenedorRef: React.RefObject<HTMLDivElement>\n  cursorStyle: string\n  pan: { x: number; y: number }\n  zoom: number\n  imagenFondo: string | null\n  dimensionesImagen: { w: number; h: number }\n  guias: Guia[]\n  mesas: Mesa[]\n  sectores: Sector[]\n  idsSeleccionados: string[]\n  cajaSeleccion: CajaSeleccion\n  editandoNombreMesa: EditandoNombre\n  inputNombreRef: React.RefObject<HTMLInputElement>\n  onMouseDown: (e: React.MouseEvent, tipo: string, mesa?: Mesa | null) => void\n  onMouseMove: (e: React.MouseEvent) => void\n  onMouseUp: () => void\n  onDoubleClickMesa: (mesa: Mesa) => void\n  onEditandoNombreChange: (e: EditandoNombre) => void\n  onConfirmarNombre: () => void\n  onTouchStart: (e: React.TouchEvent, tipo: string, mesa?: Mesa | null) => void\n  onTouchMove: (e: React.TouchEvent) => void\n  onTouchEnd: () => void\n}\n\nexport function CanvasArea({\n  referenciaSvg,\n  contenedorRef,\n  cursorStyle,\n  pan,\n  zoom,\n  imagenFondo,\n  dimensionesImagen,\n  guias,\n  mesas,\n  sectores,\n  idsSeleccionados,\n  cajaSeleccion,\n  editandoNombreMesa,\n  inputNombreRef,\n  onMouseDown,\n  onMouseMove,\n  onMouseUp,\n  onDoubleClickMesa,\n  onEditandoNombreChange,\n  onConfirmarNombre,\n  onTouchStart,\n  onTouchMove,\n  onTouchEnd,\n}: CanvasAreaProps) {\n  return (\n    <div\n      ref={contenedorRef}\n      className=\"flex-1 relative overflow-hidden\"\n      style={{ cursor: cursorStyle, touchAction: \"none\" }}\n      onMouseDown={(e) => onMouseDown(e, \"lienzo\")}\n      onMouseMove={onMouseMove}\n      onMouseUp={onMouseUp}\n      onMouseLeave={onMouseUp}\n      onTouchStart={(e) => onTouchStart(e, \"lienzo\")}\n      onTouchMove={onTouchMove}\n      onTouchEnd={onTouchEnd}\n    >\n      <svg ref={referenciaSvg} width=\"100%\" height=\"100%\" className=\"w-full h-full block\">\n        <defs>\n          <filter id=\"chair-shadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n            <feDropShadow dx=\"1\" dy=\"1\" stdDeviation=\"2\" floodColor=\"#000000\" floodOpacity=\"0.15\" />\n          </filter>\n          {!imagenFondo && (\n            <pattern id=\"grid\" width=\"40\" height=\"40\" patternUnits=\"userSpaceOnUse\">\n              <path d=\"M 40 0 L 0 0 0 40\" fill=\"none\" stroke=\"#cbd5e1\" strokeWidth=\"1\" />\n            </pattern>\n          )}\n        </defs>\n\n        <g id=\"contenido-mapa\" transform={`translate(${pan.x},${pan.y}) scale(${zoom})`}>\n          {imagenFondo ? (\n            <g id=\"capa-fondo\">\n              <rect\n                x=\"0\"\n                y=\"0\"\n                width={dimensionesImagen.w}\n                height={dimensionesImagen.h}\n                fill=\"white\"\n                stroke=\"#ddd\"\n                strokeWidth=\"2\"\n              />\n              <image\n                href={imagenFondo}\n                x=\"0\"\n                y=\"0\"\n                width={dimensionesImagen.w}\n                height={dimensionesImagen.h}\n                opacity={0.6}\n              />\n            </g>\n          ) : (\n            <g id=\"capa-grid\">\n              <rect x=\"-50000\" y=\"-50000\" width=\"100000\" height=\"100000\" fill=\"url(#grid)\" />\n              <line x1=\"-50000\" y1=\"0\" x2=\"50000\" y2=\"0\" stroke=\"#94a3b8\" strokeWidth=\"2\" />\n              <line x1=\"0\" y1=\"-50000\" x2=\"0\" y2=\"50000\" stroke=\"#94a3b8\" strokeWidth=\"2\" />\n            </g>\n          )}\n\n          <g id=\"capa-guias\">\n            {guias.map((guia, i) =>\n              guia.type === \"v\" ? (\n                <line\n                  key={i}\n                  x1={guia.pos}\n                  y1={-50000}\n                  x2={guia.pos}\n                  y2={50000}\n                  stroke=\"#ff00ff\"\n                  strokeWidth={1 / zoom}\n                  strokeDasharray=\"4,4\"\n                />\n              ) : (\n                <line\n                  key={i}\n                  x1={-50000}\n                  y1={guia.pos}\n                  x2={50000}\n                  y2={guia.pos}\n                  stroke=\"#ff00ff\"\n                  strokeWidth={1 / zoom}\n                  strokeDasharray=\"4,4\"\n                />\n              ),\n            )}\n          </g>\n\n          {mesas.map((m) => (\n            <MesaSvg\n              key={m.id}\n              mesa={m}\n              sectores={sectores}\n              isSelected={idsSeleccionados.includes(m.id)}\n              onMouseDown={(e, mesa) => onMouseDown(e, \"mesa\", mesa)}\n              onDoubleClick={onDoubleClickMesa}\n              onTouchStart={(e, mesa) => onTouchStart(e, \"mesa\", mesa)}\n            />\n          ))}\n\n          {cajaSeleccion && (\n            <rect\n              id=\"capa-seleccion\"\n              x={Math.min(cajaSeleccion.startX, cajaSeleccion.currentX)}\n              y={Math.min(cajaSeleccion.startY, cajaSeleccion.currentY)}\n              width={Math.abs(cajaSeleccion.currentX - cajaSeleccion.startX)}\n              height={Math.abs(cajaSeleccion.currentY - cajaSeleccion.startY)}\n              fill=\"rgba(99, 102, 241, 0.1)\"\n              stroke=\"#6366f1\"\n              strokeWidth={1 / zoom}\n              strokeDasharray=\"4,4\"\n            />\n          )}\n        </g>\n      </svg>\n\n      {/* INPUT EDICIÓN NOMBRE */}\n      {editandoNombreMesa && (\n        <div\n          className=\"fixed z-50\"\n          style={{ left: editandoNombreMesa.x, top: editandoNombreMesa.y, transform: \"translateX(-50%)\" }}\n        >\n          <input\n            ref={inputNombreRef}\n            type=\"text\"\n            value={editandoNombreMesa.valor}\n            onChange={(e) => onEditandoNombreChange({ ...editandoNombreMesa, valor: e.target.value })}\n            onBlur={onConfirmarNombre}\n            onKeyDown={(e) => {\n              if (e.key === \"Enter\") onConfirmarNombre()\n              if (e.key === \"Escape\") onEditandoNombreChange(null)\n            }}\n            className=\"px-2 py-1 text-sm font-semibold text-center bg-white border-2 border-indigo-500 rounded shadow-lg outline-none min-w-[80px]\"\n            style={{ fontSize: `${Math.max(12, 14 * zoom)}px` }}\n          />\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAKA;AALA;;;AAiCO,SAAS,WAAW,EACzB,aAAa,EACb,aAAa,EACb,WAAW,EACX,GAAG,EACH,IAAI,EACJ,WAAW,EACX,iBAAiB,EACjB,KAAK,EACL,KAAK,EACL,QAAQ,EACR,gBAAgB,EAChB,aAAa,EACb,kBAAkB,EAClB,cAAc,EACd,WAAW,EACX,WAAW,EACX,SAAS,EACT,iBAAiB,EACjB,sBAAsB,EACtB,iBAAiB,EACjB,YAAY,EACZ,WAAW,EACX,UAAU,EACM;IAChB,qBACE,8OAAC;QACC,KAAK;QACL,WAAU;QACV,OAAO;YAAE,QAAQ;YAAa,aAAa;QAAO;QAClD,aAAa,CAAC,IAAM,YAAY,GAAG;QACnC,aAAa;QACb,WAAW;QACX,cAAc;QACd,cAAc,CAAC,IAAM,aAAa,GAAG;QACrC,aAAa;QACb,YAAY;;0BAEZ,8OAAC;gBAAI,KAAK;gBAAe,OAAM;gBAAO,QAAO;gBAAO,WAAU;;kCAC5D,8OAAC;;0CACC,8OAAC;gCAAO,IAAG;gCAAe,GAAE;gCAAO,GAAE;gCAAO,OAAM;gCAAO,QAAO;0CAC9D,cAAA,8OAAC;oCAAa,IAAG;oCAAI,IAAG;oCAAI,cAAa;oCAAI,YAAW;oCAAU,cAAa;;;;;;;;;;;4BAEhF,CAAC,6BACA,8OAAC;gCAAQ,IAAG;gCAAO,OAAM;gCAAK,QAAO;gCAAK,cAAa;0CACrD,cAAA,8OAAC;oCAAK,GAAE;oCAAoB,MAAK;oCAAO,QAAO;oCAAU,aAAY;;;;;;;;;;;;;;;;;kCAK3E,8OAAC;wBAAE,IAAG;wBAAiB,WAAW,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,QAAQ,EAAE,KAAK,CAAC,CAAC;;4BAC5E,4BACC,8OAAC;gCAAE,IAAG;;kDACJ,8OAAC;wCACC,GAAE;wCACF,GAAE;wCACF,OAAO,kBAAkB,CAAC;wCAC1B,QAAQ,kBAAkB,CAAC;wCAC3B,MAAK;wCACL,QAAO;wCACP,aAAY;;;;;;kDAEd,8OAAC;wCACC,MAAM;wCACN,GAAE;wCACF,GAAE;wCACF,OAAO,kBAAkB,CAAC;wCAC1B,QAAQ,kBAAkB,CAAC;wCAC3B,SAAS;;;;;;;;;;;qDAIb,8OAAC;gCAAE,IAAG;;kDACJ,8OAAC;wCAAK,GAAE;wCAAS,GAAE;wCAAS,OAAM;wCAAS,QAAO;wCAAS,MAAK;;;;;;kDAChE,8OAAC;wCAAK,IAAG;wCAAS,IAAG;wCAAI,IAAG;wCAAQ,IAAG;wCAAI,QAAO;wCAAU,aAAY;;;;;;kDACxE,8OAAC;wCAAK,IAAG;wCAAI,IAAG;wCAAS,IAAG;wCAAI,IAAG;wCAAQ,QAAO;wCAAU,aAAY;;;;;;;;;;;;0CAI5E,8OAAC;gCAAE,IAAG;0CACH,MAAM,GAAG,CAAC,CAAC,MAAM,IAChB,KAAK,IAAI,KAAK,oBACZ,8OAAC;wCAEC,IAAI,KAAK,GAAG;wCACZ,IAAI,CAAC;wCACL,IAAI,KAAK,GAAG;wCACZ,IAAI;wCACJ,QAAO;wCACP,aAAa,IAAI;wCACjB,iBAAgB;uCAPX;;;;6DAUP,8OAAC;wCAEC,IAAI,CAAC;wCACL,IAAI,KAAK,GAAG;wCACZ,IAAI;wCACJ,IAAI,KAAK,GAAG;wCACZ,QAAO;wCACP,aAAa,IAAI;wCACjB,iBAAgB;uCAPX;;;;;;;;;;4BAaZ,MAAM,GAAG,CAAC,CAAC,kBACV,8OAAC,+IAAO;oCAEN,MAAM;oCACN,UAAU;oCACV,YAAY,iBAAiB,QAAQ,CAAC,EAAE,EAAE;oCAC1C,aAAa,CAAC,GAAG,OAAS,YAAY,GAAG,QAAQ;oCACjD,eAAe;oCACf,cAAc,CAAC,GAAG,OAAS,aAAa,GAAG,QAAQ;mCAN9C,EAAE,EAAE;;;;;4BAUZ,+BACC,8OAAC;gCACC,IAAG;gCACH,GAAG,KAAK,GAAG,CAAC,cAAc,MAAM,EAAE,cAAc,QAAQ;gCACxD,GAAG,KAAK,GAAG,CAAC,cAAc,MAAM,EAAE,cAAc,QAAQ;gCACxD,OAAO,KAAK,GAAG,CAAC,cAAc,QAAQ,GAAG,cAAc,MAAM;gCAC7D,QAAQ,KAAK,GAAG,CAAC,cAAc,QAAQ,GAAG,cAAc,MAAM;gCAC9D,MAAK;gCACL,QAAO;gCACP,aAAa,IAAI;gCACjB,iBAAgB;;;;;;;;;;;;;;;;;;YAOvB,oCACC,8OAAC;gBACC,WAAU;gBACV,OAAO;oBAAE,MAAM,mBAAmB,CAAC;oBAAE,KAAK,mBAAmB,CAAC;oBAAE,WAAW;gBAAmB;0BAE9F,cAAA,8OAAC;oBACC,KAAK;oBACL,MAAK;oBACL,OAAO,mBAAmB,KAAK;oBAC/B,UAAU,CAAC,IAAM,uBAAuB;4BAAE,GAAG,kBAAkB;4BAAE,OAAO,EAAE,MAAM,CAAC,KAAK;wBAAC;oBACvF,QAAQ;oBACR,WAAW,CAAC;wBACV,IAAI,EAAE,GAAG,KAAK,SAAS;wBACvB,IAAI,EAAE,GAAG,KAAK,UAAU,uBAAuB;oBACjD;oBACA,WAAU;oBACV,OAAO;wBAAE,UAAU,GAAG,KAAK,GAAG,CAAC,IAAI,KAAK,MAAM,EAAE,CAAC;oBAAC;;;;;;;;;;;;;;;;;AAM9D"}},
    {"offset": {"line": 5187, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/components/controls/zoom-controls.tsx"],"sourcesContent":["\"use client\"\n\nimport { ZoomIn, ZoomOut, Maximize } from \"lucide-react\"\nimport { TooltipProvider, Tooltip } from \"@/components/ui/tooltip-custom\"\n\ninterface ZoomControlsProps {\n  zoom: number\n  isMac: boolean\n  onZoomIn: () => void\n  onZoomOut: () => void\n  onResetView: () => void\n}\n\nexport function ZoomControls({ zoom, isMac, onZoomIn, onZoomOut, onResetView }: ZoomControlsProps) {\n  return (\n    <TooltipProvider>\n      <div className=\"absolute bottom-6 right-6 flex items-center gap-2 bg-white rounded-xl shadow-lg p-2 border border-slate-200 z-10\">\n        <span className=\"text-xs font-medium text-slate-500 px-2 min-w-[50px] text-center\">\n          {Math.round(zoom * 100)}%\n        </span>\n\n        <div className=\"w-px h-5 bg-slate-200\" />\n\n        <Tooltip label=\"Acercar\" isMac={isMac} position=\"left\">\n          <button\n            onClick={onZoomIn}\n            className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-600 hover:text-indigo-600\"\n          >\n            <ZoomIn size={16} />\n          </button>\n        </Tooltip>\n\n        <Tooltip label=\"Alejar\" isMac={isMac} position=\"left\">\n          <button\n            onClick={onZoomOut}\n            className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-600 hover:text-indigo-600\"\n          >\n            <ZoomOut size={16} />\n          </button>\n        </Tooltip>\n\n        <div className=\"w-px h-5 bg-slate-200\" />\n\n        <Tooltip label=\"Restablecer vista\" shortcut=\"Ctrl + 0\" isMac={isMac} position=\"left\">\n          <button\n            onClick={onResetView}\n            className=\"p-2 hover:bg-slate-100 rounded-lg transition-colors text-slate-600 hover:text-indigo-600\"\n          >\n            <Maximize size={16} />\n          </button>\n        </Tooltip>\n      </div>\n    </TooltipProvider>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AACA;AAHA;;;;AAaO,SAAS,aAAa,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,SAAS,EAAE,WAAW,EAAqB;IAC/F,qBACE,8OAAC,yJAAe;kBACd,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAK,WAAU;;wBACb,KAAK,KAAK,CAAC,OAAO;wBAAK;;;;;;;8BAG1B,8OAAC;oBAAI,WAAU;;;;;;8BAEf,8OAAC,iJAAO;oBAAC,OAAM;oBAAU,OAAO;oBAAO,UAAS;8BAC9C,cAAA,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC,oNAAM;4BAAC,MAAM;;;;;;;;;;;;;;;;8BAIlB,8OAAC,iJAAO;oBAAC,OAAM;oBAAS,OAAO;oBAAO,UAAS;8BAC7C,cAAA,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC,uNAAO;4BAAC,MAAM;;;;;;;;;;;;;;;;8BAInB,8OAAC;oBAAI,WAAU;;;;;;8BAEf,8OAAC,iJAAO;oBAAC,OAAM;oBAAoB,UAAS;oBAAW,OAAO;oBAAO,UAAS;8BAC5E,cAAA,8OAAC;wBACC,SAAS;wBACT,WAAU;kCAEV,cAAA,8OAAC,sNAAQ;4BAAC,MAAM;;;;;;;;;;;;;;;;;;;;;;;;;;;AAM5B"}},
    {"offset": {"line": 5319, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Documents/eventos/eventos/app/page.tsx"],"sourcesContent":["\"use client\"\n\nimport { useCanvas } from \"@/hooks/use-canvas\"\nimport { useIsMac } from \"@/hooks/use-is-mac\"\nimport { TooltipProvider } from \"@/components/ui/tooltip-custom\"\nimport { SidebarIzquierda } from \"@/components/sidebar/sidebar-izquierda\"\nimport { ModalConfiguracion } from \"@/components/modals/modal-configuracion\"\nimport { PanelPropiedades } from \"@/components/panels/panel-propiedades\"\nimport { ModalConfirmacion } from \"@/components/modals/modal-confirmacion\"\nimport { ModalNombreMesa } from \"@/components/modals/modal-nombre-mesa\"\nimport { ModalAyuda } from \"@/components/modals/modal-ayuda\"\nimport { EditorHeader } from \"@/components/header/editor-header\"\nimport { CanvasArea } from \"@/components/canvas/canvas-area\"\nimport { ZoomControls } from \"@/components/controls/zoom-controls\"\nimport { useState } from \"react\"\n\nexport default function App() {\n  const canvas = useCanvas()\n  const isMac = useIsMac()\n  const [mostrarModalEliminar, setMostrarModalEliminar] = useState(false)\n  const [mostrarModalNombre, setMostrarModalNombre] = useState(false)\n\n  // Modal de configuración inicial\n  if (!canvas.modoConfigurado) {\n    return (\n      <ModalConfiguracion\n        pasoModal={canvas.pasoModal}\n        setPasoModal={canvas.setPasoModal}\n        configSectorUnico={canvas.configSectorUnico}\n        setConfigSectorUnico={canvas.setConfigSectorUnico}\n        onConfirmarSectorUnico={canvas.confirmarSectorUnico}\n        onIniciarMapaCompleto={canvas.iniciarMapaCompleto}\n      />\n    )\n  }\n\n  return (\n    <TooltipProvider>\n      <div className=\"flex h-screen bg-slate-50 font-sans text-slate-800\">\n        {/* INPUT OCULTO PARA IMAGEN */}\n        <input\n          type=\"file\"\n          ref={canvas.inputArchivoRef}\n          onChange={canvas.manejarSubidaImagen}\n          accept=\"image/*\"\n          className=\"hidden\"\n        />\n\n        {/* SIDEBAR IZQUIERDA */}\n        <SidebarIzquierda\n          isMac={isMac}\n          herramienta={canvas.herramienta}\n          setHerramienta={canvas.setHerramienta}\n          agregarMesa={canvas.agregarMesa}\n          tipoMapa={canvas.tipoMapa}\n          panelActivo={canvas.panelActivo}\n          setPanelActivo={canvas.setPanelActivo}\n          imagenFondo={canvas.imagenFondo}\n          onSubirImagen={() => canvas.inputArchivoRef.current?.click()}\n          onQuitarImagen={() => { }}\n          menuDescargaAbierto={canvas.menuDescargaAbierto}\n          setMenuDescargaAbierto={canvas.setMenuDescargaAbierto}\n          onExportarSVG={canvas.handleExportarSVG}\n          onDescargarJSON={canvas.handleDescargarJSON}\n          onMostrarAyuda={() => canvas.setMostrarAyudaAtajos(true)}\n        />\n\n        {/* ÁREA PRINCIPAL */}\n        <div className=\"flex-1 relative bg-slate-200 overflow-hidden flex flex-col ml-16\">\n          {/* HEADER */}\n          <EditorHeader\n            tipoMapa={canvas.tipoMapa}\n            sectorNombre={canvas.sectores[0]?.nombre}\n            sectorPrecio={canvas.sectores[0]?.precio}\n            isMac={isMac}\n            puedeDeshacer={canvas.puedeDeshacer}\n            puedeRehacer={canvas.puedeRehacer}\n            onDeshacer={canvas.deshacer}\n            onRehacer={canvas.rehacer}\n            cantidadSeleccionadas={canvas.idsSeleccionados.length}\n            herramientaActiva={canvas.herramientaActiva}\n          />\n\n          {/* CANVAS */}\n          <CanvasArea\n            referenciaSvg={canvas.referenciaSvg}\n            contenedorRef={canvas.contenedorRef}\n            cursorStyle={canvas.cursorStyle}\n            pan={canvas.pan}\n            zoom={canvas.zoom}\n            imagenFondo={canvas.imagenFondo}\n            dimensionesImagen={canvas.dimensionesImagen}\n            guias={canvas.guias}\n            mesas={canvas.mesas}\n            sectores={canvas.sectores}\n            idsSeleccionados={canvas.idsSeleccionados}\n            cajaSeleccion={canvas.cajaSeleccion}\n            editandoNombreMesa={canvas.editandoNombreMesa}\n            inputNombreRef={canvas.inputNombreRef}\n            onMouseDown={canvas.alPresionarMouse}\n            onMouseMove={canvas.alMoverMouse}\n            onMouseUp={canvas.alSoltarMouse}\n            onDoubleClickMesa={canvas.manejarDobleClickMesa}\n            onEditandoNombreChange={canvas.setEditandoNombreMesa}\n            onConfirmarNombre={canvas.confirmarNombreMesa}\n            onTouchStart={canvas.alPresionarTouch}\n            onTouchMove={canvas.alMoverTouch}\n            onTouchEnd={canvas.alSoltarTouch}\n          />\n\n          {/* CONTROLES DE ZOOM */}\n          <ZoomControls\n            zoom={canvas.zoom}\n            isMac={isMac}\n            onZoomIn={() => canvas.setZoom((z) => Math.min(z + 0.1, 5))}\n            onZoomOut={() => canvas.setZoom((z) => Math.max(z - 0.1, 0.1))}\n            onResetView={canvas.centrarlVista}\n          />\n        </div>\n\n        {/* PANEL DE PROPIEDADES */}\n        <PanelPropiedades\n          panelActivo={canvas.panelActivo}\n          setPanelActivo={canvas.setPanelActivo}\n          tipoMapa={canvas.tipoMapa}\n          sectores={canvas.sectores}\n          mesaActiva={canvas.mesaActiva}\n          idsSeleccionados={canvas.idsSeleccionados}\n          hayMesasBloqueadas={canvas.hayMesasBloqueadas}\n          limitesSlider={canvas.limitesSlider}\n          onActualizarMesa={canvas.actualizarMesa}\n          onActualizarDiametro={canvas.actualizarDiametro}\n          onToggleLado={canvas.toggleLado}\n          onToggleBloqueo={canvas.toggleBloqueo}\n          onDuplicar={canvas.duplicarMesasSeleccionadas}\n          onEliminar={() => setMostrarModalEliminar(true)}\n          onEditarNombre={() => setMostrarModalNombre(true)}\n          onAgregarSector={canvas.agregarSector}\n          onActualizarSector={canvas.actualizarSector}\n          onEliminarSector={canvas.eliminarSector}\n          onGuardarHistorial={canvas.guardarHistorial}\n        />\n\n        {/* MODALES */}\n        {mostrarModalEliminar && (\n          <ModalConfirmacion\n            mensaje={`¿Eliminar ${canvas.idsSeleccionados.length} mesa(s)?`}\n            onConfirmar={() => {\n              canvas.guardarHistorial()\n              canvas.eliminarSeleccionadas()\n              setMostrarModalEliminar(false)\n            }}\n            onCancelar={() => setMostrarModalEliminar(false)}\n          />\n        )}\n\n        {mostrarModalNombre && canvas.mesaActiva && (\n          <ModalNombreMesa\n            valorInicial={canvas.mesaActiva.etiqueta}\n            onConfirmar={(nuevoNombre) => {\n              canvas.actualizarMesa(\"etiqueta\", nuevoNombre)\n              setMostrarModalNombre(false)\n            }}\n            onCancelar={() => setMostrarModalNombre(false)}\n          />\n        )}\n\n        {canvas.mostrarAyudaAtajos && <ModalAyuda isMac={isMac} onClose={() => canvas.setMostrarAyudaAtajos(false)} />}\n      </div>\n    </TooltipProvider>\n  )\n}\n"],"names":[],"mappings":"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"}}]
}